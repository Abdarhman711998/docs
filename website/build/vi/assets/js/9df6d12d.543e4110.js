"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4642],{70801:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>u});var a=t(85893),i=t(11151),r=t(77229);const l={id:"circulating-supply",title:"Creating a Circulating Supply",sidebar_label:"Circulating Supply"},s=void 0,o={id:"tutorials/fts/circulating-supply",title:"Creating a Circulating Supply",description:"In the previous tutorial, you looked at what a fungible token was and how you could define one in your smart contract. In this tutorial, you'll learn how to create a circulating supply belonging to the contract owner and view all the tokens, with their metadata, in the NEAR wallet.",source:"@site/i18n/vi/docusaurus-plugin-content-docs/current/3.tutorials/fts/3-circulating-supply.md",sourceDirName:"3.tutorials/fts",slug:"/tutorials/fts/circulating-supply",permalink:"/vi/tutorials/fts/circulating-supply",draft:!1,unlisted:!1,editUrl:"https://github.com/near/docs/edit/master/website/../docs/3.tutorials/fts/3-circulating-supply.md",tags:[],version:"current",lastUpdatedBy:"Github Actions",lastUpdatedAt:1711465748e3,sidebarPosition:3,frontMatter:{id:"circulating-supply",title:"Creating a Circulating Supply",sidebar_label:"Circulating Supply"},sidebar:"tutorials",previous:{title:"Defining Your Token",permalink:"/vi/tutorials/fts/defining-a-token"},next:{title:"Registering Accounts",permalink:"/vi/tutorials/fts/registering-accounts"}},c={},u=[{value:"Gi\u1edbi thi\u1ec7u",id:"gi\u1edbi-thi\u1ec7u",level:2},{value:"Modifications to contract",id:"modifications-to-contract",level:2},{value:"Setting the supply",id:"setting-the-supply",level:3},{value:"Getting the supply",id:"getting-the-supply",level:3},{value:"Event",id:"event",level:2},{value:"V\u1ea5n \u0111\u1ec1",id:"the-problem",level:3},{value:"Ph\u01b0\u01a1ng ph\xe1p",id:"the-solution",level:3},{value:"Examples",id:"examples",level:3},{value:"T\xecnh hu\u1ed1ng A - mint \u0111\u01a1n gi\u1ea3n",id:"t\xecnh-hu\u1ed1ng-a---mint-\u0111\u01a1n-gi\u1ea3n",level:4},{value:"Scenario B - batch transfer",id:"scenario-b---batch-transfer",level:4},{value:"C\xe1c s\u1eeda \u0111\u1ed5i v\u1edbi contract",id:"modifications-to-the-contract",level:2},{value:"T\u1ea1o c\xe1c file event",id:"events-rs",level:3},{value:"Th\xeam c\xe1c module v\xe0 constant",id:"lib-rs",level:3},{value:"Logging the total supply minted",id:"logging-the-total-supply-minted",level:3},{value:"Deploy contract",id:"redeploying-contract",level:2},{value:"T\u1ea1o m\u1ed9t sub-account",id:"t\u1ea1o-m\u1ed9t-sub-account",level:3},{value:"Initialization",id:"initialization",level:3},{value:"Querying Supply Information",id:"testing",level:3},{value:"Viewing FTs in the wallet",id:"viewing-fts-in-wallet",level:2},{value:"T\u1ed5ng k\u1ebft",id:"t\u1ed5ng-k\u1ebft",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"In the previous tutorial, you looked at what a fungible token was and how you could define one in your smart contract. In this tutorial, you'll learn how to create a circulating supply belonging to the contract owner and view all the tokens, with their metadata, in the NEAR wallet."}),"\n",(0,a.jsxs)(n.p,{children:["To get started, either work off the code you wrote in the previous tutorial or switch to the ",(0,a.jsx)(n.code,{children:"2.define-a-token"})," folder in our repo. If you haven't cloned the repository, refer to the ",(0,a.jsx)(n.a,{href:"/vi/tutorials/fts/skeleton",children:"Contract Architecture"})," to start."]}),"\n",(0,a.jsxs)(n.p,{children:["If you wish to see the finished code for this tutorial, you can find it in the ",(0,a.jsx)(n.code,{children:"3.initial-supply"})," folder."]}),"\n",(0,a.jsx)(n.h2,{id:"gi\u1edbi-thi\u1ec7u",children:"Gi\u1edbi thi\u1ec7u"}),"\n",(0,a.jsx)(n.p,{children:"Every fungible token contract on NEAR has what's known as a circulating supply. This is the number of tokens that exist on the contract and are actively available to trade."}),"\n",(0,a.jsx)(n.p,{children:"When creating your contract, there are many different ways you could implement this to start. A few examples could be:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Specify a starting total supply and distribute it based on a set of parameters (Benji gets 20%, Josh gets 2.5%, and the rest goes to Mike)."}),"\n",(0,a.jsx)(n.li,{children:"Have a first come first serve pool where everybody claims up to X amount of tokens."}),"\n",(0,a.jsx)(n.li,{children:"Create tokens on demand resulting in a steady increase of the circulating supply overtime up to a specified cap."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"The simplest approach, however, is to specify a total supply when initializing the contract. The entire circulating supply is then created and sent to the owner of the contract. The owner would then be able to transfer or sell the tokens as they wish. Once the initial supply is created, no more FTs could be minted. This means that the circulating supply will always be equal to the total supply."}),"\n",(0,a.jsx)(n.h2,{id:"modifications-to-contract",children:"Modifications to contract"}),"\n",(0,a.jsx)(n.p,{children:"In order to implement this logic, you'll need to keep track of two things in your smart contract:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"A mapping of an account to the number of tokens they own."}),"\n",(0,a.jsx)(n.li,{children:"The total supply of tokens."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"The mapping is so that you can easily check or modify the tokens owned by any given account at anytime within your contract. You'll also need to keep track of the total supply since it's required by the standard that you have a function to query for the supply of tokens on the contract."}),"\n",(0,a.jsx)(n.h3,{id:"setting-the-supply",children:"Setting the supply"}),"\n",(0,a.jsxs)(n.p,{children:["Head over to the ",(0,a.jsx)(n.code,{children:"src/lib.rs"})," file and add the following code to the ",(0,a.jsx)(n.code,{children:"Contract"})," struct."]}),"\n",(0,a.jsx)(r.Ey,{language:"rust",start:"21",end:"32",url:"https://github.com/near-examples/ft-tutorial/blob/main/3.initial-supply/src/lib.rs"}),"\n",(0,a.jsxs)(n.p,{children:["You'll now want to add the functionality for depositing the tokens into the owner's account. Do this by creating a helper function that takes an amount and an account ID and performs the deposit logic for you. First create a new file ",(0,a.jsx)(n.code,{children:"src/internal.rs"})," such that your file structure now looks as follows."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"src\n  \u251c\u2500\u2500 ft_core.rs\n  \u251c\u2500\u2500 internal.rs\n  \u251c\u2500\u2500 lib.rs\n  \u251c\u2500\u2500 metadata.rs\n  \u2514\u2500\u2500 storage.rs\n"})}),"\n",(0,a.jsxs)(n.p,{children:["In the ",(0,a.jsx)(n.code,{children:"internal.rs"})," file, add the following code to create a function called ",(0,a.jsx)(n.code,{children:"internal_deposit"})," which takes an ",(0,a.jsx)(n.code,{children:"AccountId"})," and a ",(0,a.jsx)(n.code,{children:"Balance"})," and adds the amount to the account's current supply of FTs."]}),"\n",(0,a.jsx)(r.Ey,{language:"rust",start:"1",end:"18",url:"https://github.com/near-examples/ft-tutorial/blob/main/3.initial-supply/src/internal.rs"}),"\n",(0,a.jsxs)(n.p,{children:["Now that the functionality for depositing FTs is in place, switch back to the ",(0,a.jsx)(n.code,{children:"src/lib.rs"})," file and add the ",(0,a.jsx)(n.code,{children:"internal"})," module:"]}),"\n",(0,a.jsx)(r.Ey,{language:"rust",start:"8",end:"10",url:"https://github.com/near-examples/ft-tutorial/blob/main/3.initial-supply/src/lib.rs"}),"\n",(0,a.jsxs)(n.p,{children:["In addition, add the following code to the ",(0,a.jsx)(n.code,{children:"new"})," initialization function."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-rust",children:"#[init]\npub fn new(\n    owner_id: AccountId,\n    total_supply: U128,\n    metadata: FungibleTokenMetadata,\n) -> Self {\n    // Create a variable of type Self with all the fields initialized. \n    let mut this = Self {\n        // Set the total supply\n        total_supply: total_supply.0,\n        // Storage keys are simply the prefixes used for the collections. This helps avoid data collision\n        accounts: LookupMap::new(StorageKey::Accounts.try_to_vec().unwrap()),\n        metadata: LazyOption::new(\n            StorageKey::Metadata.try_to_vec().unwrap(),\n            Some(&metadata),\n        ),\n    };\n\n    // Set the owner's balance to the total supply.\n    this.internal_deposit(&owner_id, total_supply.into());\n\n    // Return the Contract object\n    this\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:["This will initialize the total supply to what you passed in and will call the ",(0,a.jsx)(n.code,{children:"internal_deposit"})," function to add the total supply to the owner's account."]}),"\n",(0,a.jsx)(n.h3,{id:"getting-the-supply",children:"Getting the supply"}),"\n",(0,a.jsxs)(n.p,{children:["Now that you've created a way to set the total supply, you'll also want a way to query for it as well as the balance for a specific user. The ",(0,a.jsx)(n.a,{href:"https://nomicon.io/Standards/Tokens/FungibleToken/Core",children:"standard"})," dictates that you should have two methods on your smart contract for doing these operations:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"ft_total_supply"})})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"ft_balance_of"})})}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Head on over to the ",(0,a.jsx)(n.code,{children:"src/ft_core.rs"})," file and add the following code to these functions."]}),"\n",(0,a.jsx)(r.Ey,{language:"rust",start:"83",end:"91",url:"https://github.com/near-examples/ft-tutorial/blob/main/3.initial-supply/src/ft_core.rs"}),"\n",(0,a.jsx)(n.p,{children:"At this point, you have everything you need to create an initial supply of tokens and query for the balance of a given account. There is, however, a problem that we need to solve. How will the wallet know that the total supply was created and is owned by the contract owner? How would it even know that our contract is a fungible token contract? If you were to deploy the contract and run through the setup process, you would be able to query for the information from the contract but you wouldn't see any FTs in the owner's NEAR wallet."}),"\n",(0,a.jsx)(n.h2,{id:"event",children:"Event"}),"\n",(0,a.jsxs)(n.p,{children:["Have you ever wondered how the wallet knows which FTs you own and how it can display them in the ",(0,a.jsx)(n.a,{href:"https://testnet.mynearwallet.com/",children:"balances tab"}),"? Originally, an ",(0,a.jsx)(n.a,{href:"/tools/indexer-for-explorer",children:"indexer"})," was used and it listened for any functions starting with ",(0,a.jsx)(n.code,{children:"ft_"})," on your account. These contracts were then flagged on your account as likely FT contracts."]}),"\n",(0,a.jsxs)(n.p,{children:["When you navigated to your balances tab, the wallet would then query all those contracts for the number of FTs you owned using the ",(0,a.jsx)(n.code,{children:"ft_balance_of"})," function you just wrote."]}),"\n",(0,a.jsx)(n.h3,{id:"the-problem",children:"V\u1ea5n \u0111\u1ec1"}),"\n",(0,a.jsx)(n.p,{children:"This method of flagging contracts was not reliable as each FT-driven application might have its own way of minting or transferring FTs. Ngo\xe0i ra, c\xe1c \u1ee9ng d\u1ee5ng th\u01b0\u1eddng transfer ho\u1eb7c mint nhi\u1ec1u token c\xf9ng m\u1ed9t l\xfac b\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng c\xe1c batch function."}),"\n",(0,a.jsx)(n.h3,{id:"the-solution",children:"Ph\u01b0\u01a1ng ph\xe1p"}),"\n",(0,a.jsx)(n.p,{children:"A standard was introduced so that smart contracts could emit an event anytime FTs were transferred, minted, or burnt. Event n\xe0y \u1edf d\u1ea1ng log. B\u1ea5t k\u1ec3 contract tri\u1ec3n khai function nh\u01b0 th\u1ebf n\xe0o, gi\u1edd \u0111\xe2y indexer c\xf3 th\u1ec3 l\u1eafng nghe c\xe1c log \u0111\u01b0\u1ee3c ti\xeau chu\u1ea9n h\xf3a \u0111\xf3."}),"\n",(0,a.jsx)(n.p,{children:"As per the standard, you need to implement a logging functionality that gets fired when FTs are transferred or minted. Trong tr\u01b0\u1eddng h\u1ee3p n\xe0y, contract kh\xf4ng h\u1ed7 tr\u1ee3 burn v\xec th\u1ebf b\u1ea1n kh\xf4ng c\u1ea7n lo l\u1eafng v\u1ec1 n\xf3 b\xe2y gi\u1edd."}),"\n",(0,a.jsxs)(n.p,{children:["\u0110i\u1ec1u quan tr\u1ecdng c\u1ea7n l\u01b0u \xfd l\xe0 ti\xeau chu\u1ea9n quy \u0111\u1ecbnh r\u1eb1ng log ph\u1ea3i \u0111\u01b0\u1ee3c b\u1eaft \u0111\u1ea7u v\u1edbi ",(0,a.jsx)(n.code,{children:'"EVENT_JSON:"'}),". Tuy nhi\xean, c\u1ea5u tr\xfac log c\u1ee7a b\u1ea1n lu\xf4n ph\u1ea3i ch\u1ee9a 3 th\u1ee9 d\u01b0\u1edbi \u0111\xe2y:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"standard"}),": the current name of the standard (e.g. nep141)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"version"}),": phi\xean b\u1ea3n c\u1ee7a ti\xeau chu\u1ea9n b\u1ea1n \u0111ang s\u1eed d\u1ee5ng (v\xed d\u1ee5 1.0.0)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"event"}),": m\u1ed9t danh s\xe1ch c\xe1c event b\u1ea1n \u0111ang ph\xe1t ra."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Event interface kh\xe1c nhau t\xf9y thu\u1ed9c v\xe0o vi\u1ec7c b\u1ea1n \u0111ang ghi l\u1ea1i c\xe1c transfer hay mint. Interface c\u1ee7a c\u1ea3 hai event \u0111\u01b0\u1ee3c ph\xe1c th\u1ea3o nh\u01b0 d\u01b0\u1edbi \u0111\xe2y."}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"C\xe1c transfer event"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"old_owner_id"}),": the old owner of the FTs."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"new_owner_id"}),": the new owner that the FTs are being transferred to."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"amount"}),": the number of tokens transferred."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.em,{children:"Optional"})," - ",(0,a.jsx)(n.strong,{children:"memo"}),": m\u1ed9t t\xf9y ch\u1ecdn message \u0111\u1ec3 \u0111\u01b0a v\xe0o event."]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"C\xe1c mint event"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"owner_id"}),": the owner that the FTs are being minted to."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"amount"}),": the amount of FTs being minted."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.em,{children:"Optional"})," - ",(0,a.jsx)(n.strong,{children:"memo"}),": m\u1ed9t t\xf9y ch\u1ecdn message \u0111\u1ec3 \u0111\u01b0a v\xe0o event."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,a.jsx)(n.p,{children:"In order to solidify your understanding of the standard, let's walk through two scenarios and see what the logs should look like."}),"\n",(0,a.jsx)(n.h4,{id:"t\xecnh-hu\u1ed1ng-a---mint-\u0111\u01a1n-gi\u1ea3n",children:"T\xecnh hu\u1ed1ng A - mint \u0111\u01a1n gi\u1ea3n"}),"\n",(0,a.jsx)(n.p,{children:"In this scenario, the Benji mints 50 FTs to himself and doesn't include a message. Log s\u1ebd nh\xecn gi\u1ed1ng nh\u01b0 sau."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'EVENT_JSON:{\n  "standard": "nep141",\n  "version": "1.0.0",\n  "event": "ft_mint",\n  "data": [\n    {"owner_id": "benji.testnet", "amount": "50"}\n  ]\n}\n'})}),"\n",(0,a.jsx)(n.h4,{id:"scenario-b---batch-transfer",children:"Scenario B - batch transfer"}),"\n",(0,a.jsx)(n.p,{children:"In this scenario, Benji wants to perform a batch transfer. He will send FTs to Jada, Mike, Josh, and Maria. Log s\u1ebd nh\u01b0 sau."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'EVENT_JSON:{\n    "standard": "nep141",\n    "version": "1.0.0",\n    "event": "ft_transfer",\n    "data": [\n        {"old_owner_id": "benji.near", "new_owner_id": "josh.near", "amount": "1", "memo": "go team"},\n        {"old_owner_id": "benji.near", "new_owner_id": "mike.near", "amount": "9000"},\n        {"old_owner_id": "benji.near", "new_owner_id": "jada.near", "amount": "500"},\n        {"old_owner_id": "benji.near", "new_owner_id": "maria.near", "amount": "500"}\n    ]\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"modifications-to-the-contract",children:"C\xe1c s\u1eeda \u0111\u1ed5i v\u1edbi contract"}),"\n",(0,a.jsxs)(n.p,{children:["\u1ede th\u1eddi \u0111i\u1ec3m n\xe0y, b\u1ea1n \u0111\xe3 hi\u1ec3u r\xf5 v\u1ec1 m\u1ee5c ti\xeau cu\u1ed1i c\xf9ng l\xe0 g\xec v\xec th\u1ebf h\xe3y b\u1eaft \u0111\u1ea7u l\xe0m vi\u1ec7c! Open the ",(0,a.jsx)(n.code,{children:"src"})," directory and create a new file called ",(0,a.jsx)(n.code,{children:"events.rs"}),". \u0110\xe2y l\xe0 n\u01a1i c\xe1c c\u1ea5u tr\xfac log c\u1ee7a b\u1ea1n s\u1ebd \u0111\u01b0\u1ee3c t\u1ea1o."]}),"\n",(0,a.jsx)(n.h3,{id:"events-rs",children:"T\u1ea1o c\xe1c file event"}),"\n",(0,a.jsxs)(n.p,{children:["Copy ph\u1ea7n d\u01b0\u1edbi \u0111\xe2y v\xe0o file c\u1ee7a b\u1ea1n. This will outline the structs for your ",(0,a.jsx)(n.code,{children:"EventLog"}),", ",(0,a.jsx)(n.code,{children:"FtMintLog"}),", and ",(0,a.jsx)(n.code,{children:"FtTransferLog"}),". Ngo\xe0i ra, ch\xfang ta \u0111\xe3 th\xeam ",(0,a.jsx)(n.code,{children:"EVENT_JSON:"})," l\xe0 ti\u1ec1n t\u1ed1 b\u1ea5t c\u1ee9 khi n\xe0o b\u1ea1n ghi l\u1ea1i ",(0,a.jsx)(n.code,{children:"EventLog"}),"."]}),"\n",(0,a.jsx)(r.Ey,{language:"rust",start:"1",end:"121",url:"https://github.com/near-examples/ft-tutorial/blob/main/3.initial-supply/src/events.rs"}),"\n",(0,a.jsx)(n.h3,{id:"lib-rs",children:"Th\xeam c\xe1c module v\xe0 constant"}),"\n",(0,a.jsxs)(n.p,{children:["B\xe2y gi\u1edd b\u1ea1n \u0111\xe3 t\u1ea1o m\u1ed9t file m\u1edbi, b\u1ea1n c\u1ea7n th\xeam module t\u1edbi file ",(0,a.jsx)(n.code,{children:"lib.rs"}),"."]}),"\n",(0,a.jsx)(r.Ey,{language:"rust",start:"1",end:"13",url:"https://github.com/near-examples/ft-tutorial/blob/main/3.initial-supply/src/lib.rs"}),"\n",(0,a.jsx)(n.h3,{id:"logging-the-total-supply-minted",children:"Logging the total supply minted"}),"\n",(0,a.jsxs)(n.p,{children:["Now that all the tools are set in place, you can implement the actual logging functionality. Since the contract will only be minting tokens at the very start when it's initialized, it's trivial where you should place the log. Open the ",(0,a.jsx)(n.code,{children:"src/lib.rs"})," file and navigate to the bottom of the ",(0,a.jsx)(n.code,{children:"new"})," initialization function. \u0110\xe2y l\xe0 n\u01a1i b\u1ea1n s\u1ebd x\xe2y d\u1ef1ng log \u0111\u1ec3 mint."]}),"\n",(0,a.jsx)(r.Ey,{language:"rust",start:"63",end:"97",url:"https://github.com/near-examples/ft-tutorial/blob/main/3.initial-supply/src/lib.rs"}),"\n",(0,a.jsx)(n.p,{children:"With that finished, you've successfully implemented the backbone of the events standard and it's time to start testing."}),"\n",(0,a.jsx)(n.h2,{id:"redeploying-contract",children:"Deploy contract"}),"\n",(0,a.jsx)(n.p,{children:"Since the current contract you have is already initialized, let's create a sub-account and deploy to that instead."}),"\n",(0,a.jsx)(n.h3,{id:"t\u1ea1o-m\u1ed9t-sub-account",children:"T\u1ea1o m\u1ed9t sub-account"}),"\n",(0,a.jsxs)(n.p,{children:["Ch\u1ea1y command d\u01b0\u1edbi \u0111\xe2y \u0111\u1ec3 t\u1ea1o m\u1ed9t sub-account ",(0,a.jsx)(n.code,{children:"events"})," cho account ch\xednh c\u1ee7a b\u1ea1n v\u1edbi s\u1ed1 d\u01b0 ban \u0111\u1ea7u l\xe0 25 NEAR, n\xf3 s\u1ebd \u0111\u01b0\u1ee3c transfer t\u1eeb account g\u1ed1c sang account m\u1edbi c\u1ee7a b\u1ea1n."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"near create-account events.$FT_CONTRACT_ID --masterAccount $FT_CONTRACT_ID --initialBalance 25\n"})}),"\n",(0,a.jsx)(n.p,{children:"Ti\u1ebfp theo, b\u1ea1n s\u1ebd mu\u1ed1n export m\u1ed9t bi\u1ebfn m\xf4i tr\u01b0\u1eddng cho vi\u1ec7c develop \u0111\u01b0\u1ee3c d\u1ec5 d\xe0ng h\u01a1n:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"export EVENTS_FT_CONTRACT_ID=events.$FT_CONTRACT_ID\n"})}),"\n",(0,a.jsx)(n.p,{children:"S\u1eed d\u1ee5ng build script, deploy contract nh\u01b0 b\u1ea1n \u0111\xe3 l\xe0m \u1edf c\xe1c h\u01b0\u1edbng d\u1eabn tr\u01b0\u1edbc:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd 2.define-a-token && ./build.sh && cd .. && near deploy $EVENTS_FT_CONTRACT_ID out/contract.wasm \n"})}),"\n",(0,a.jsx)(n.h3,{id:"initialization",children:"Initialization"}),"\n",(0,a.jsxs)(n.p,{children:["Now that the contract is deployed, it's time to initialize it and mint the total supply. Let's create an initial supply of 1000 ",(0,a.jsx)(n.code,{children:"gtNEAR"}),". Since it has 24 decimal places, you should put ",(0,a.jsx)(n.code,{children:"1000"})," followed by 24 zeros in the total supply field."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'near call $EVENTS_FT_CONTRACT_ID new_default_meta \'{"owner_id": "\'$EVENTS_FT_CONTRACT_ID\'", "total_supply": "1000000000000000000000000000"}\' --accountId $EVENTS_FT_CONTRACT_ID\n'})}),"\n",(0,a.jsx)(n.p,{children:"B\u1ea1n c\xf3 th\u1ec3 ki\u1ec3m tra xem m\u1ecdi th\u1ee9 c\xf3 di\u1ec5n ra \u0111\xfang kh\xf4ng b\u1eb1ng c\xe1ch xem output trong CLI c\u1ee7a m\xecnh:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'Scheduling a call: events.goteam.testnet.new_default_meta({"owner_id": "events.goteam.testnet", "total_supply": "1000000000000000000000000000"})\nDoing account.functionCall()\nReceipt: BmD2hQJCUEMmvaUd45qrt7S55cewUXQSTPWT21Um3gXd\n    Log [events.goteam.testnet]: EVENT_JSON:{"standard":"nep141","version":"1.0.0","event":"ft_mint","data":[{"owner_id":"events.goteam.testnet","amount":"1000000000000000000000000000","memo":"Initial token supply is minted"}]}\nTransaction Id BrEBqE9S3tTBcgDUU6ZyszjAbaR4wkPyEN1viYKaXpgh\nTo see the transaction in the transaction explorer, please open this url in your browser\nhttps://testnet.nearblocks.io/txns/BrEBqE9S3tTBcgDUU6ZyszjAbaR4wkPyEN1viYKaXpgh\n\'\'\n'})}),"\n",(0,a.jsx)(n.p,{children:"B\u1ea1n c\xf3 th\u1ec3 th\u1ea5y r\u1eb1ng event \u0111\xe3 \u0111\u01b0\u1ee3c log m\u1ed9t c\xe1ch ch\xednh x\xe1c!"}),"\n",(0,a.jsx)(n.h3,{id:"testing",children:"Querying Supply Information"}),"\n",(0,a.jsx)(n.p,{children:"You can now test if your view functions work properly. First, try to query for the total supply."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"near view $EVENTS_FT_CONTRACT_ID ft_total_supply\n"})}),"\n",(0,a.jsx)(n.p,{children:"N\xf3 s\u1ebd tr\u1ea3 v\u1ec1 m\u1ed9t output trong gi\u1ed1ng nh\u01b0 sau:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"'1000000000000000000000000000'\n"})}),"\n",(0,a.jsx)(n.p,{children:"Ch\xfac m\u1eebng! Now you can check if the balance of the owner account works properly. If you call the following function, it should return the same number as the total supply."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"near view $EVENTS_FT_CONTRACT_ID ft_balance_of '{\"account_id\": \"'$EVENTS_FT_CONTRACT_ID'\"}'\n"})}),"\n",(0,a.jsx)(n.p,{children:"Tr\u1ea3 v\u1ec1:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"'1000000000000000000000000000'\n"})}),"\n",(0,a.jsxs)(n.p,{children:["If you query for the balance of some other account, it should return ",(0,a.jsx)(n.code,{children:"0"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'near view $EVENTS_FT_CONTRACT_ID ft_balance_of \'{"account_id": "benjiman.testnet"}\'\n'})}),"\n",(0,a.jsx)(n.h2,{id:"viewing-fts-in-wallet",children:"Viewing FTs in the wallet"}),"\n",(0,a.jsxs)(n.p,{children:["Now that your contract implements the necessary functions that the wallet uses to pickup your contract and display the FTs, you should be able to see your tokens on display in the ",(0,a.jsx)(n.a,{href:"https://testnet.mynearwallet.com/",children:"balances tab"}),"."]}),"\n",(0,a.jsx)("img",{width:"65%",src:"/docs/assets/fts/filled-fts-in-wallet.png"}),"\n",(0,a.jsxs)(n.p,{children:["\ud83c\udf89\ud83c\udf89\ud83c\udf89 ",(0,a.jsx)(n.strong,{children:"This is awesome! Go team!"})," \ud83c\udf89\ud83c\udf89\ud83c\udf89 You can now see your very first fungible tokens in the wallet!"]}),"\n",(0,a.jsx)(n.h2,{id:"t\u1ed5ng-k\u1ebft",children:"T\u1ed5ng k\u1ebft"}),"\n",(0,a.jsxs)(n.p,{children:["Today you went through and created the logic for minting a total supply. You then implemented some of the core standard logic and the ",(0,a.jsx)(n.a,{href:"https://nomicon.io/Standards/Tokens/FungibleToken/Event",children:"events standard"}),". You created events for ",(0,a.jsx)(n.a,{href:"#modifications-to-the-contract",children:"minting"})," FTs on initialization. You then deployed and ",(0,a.jsx)(n.a,{href:"#testing",children:"tested"})," your changes and saw your very first FTs in the wallet!"]}),"\n",(0,a.jsx)(n.p,{children:"In the next tutorial, you'll look at the basics of registering accounts so that they can transfer and receive FTs."})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},85162:(e,n,t)=>{t.d(n,{Z:()=>l});t(67294);var a=t(36905);const i={tabItem:"tabItem_Ymn6"};var r=t(85893);function l(e){var n=e.children,t=e.hidden,l=e.className;return(0,r.jsx)("div",{role:"tabpanel",className:(0,a.Z)(i.tabItem,l),hidden:t,children:n})}},74866:(e,n,t)=>{t.d(n,{Z:()=>w});var a=t(67294),i=t(36905),r=t(12466),l=t(16550),s=t(20469),o=t(91980),c=t(67392),u=t(50012);function d(e){var n,t;return null!=(n=null==(t=a.Children.toArray(e).filter((function(e){return"\n"!==e})).map((function(e){if(!e||(0,a.isValidElement)(e)&&((n=e.props)&&"object"==typeof n&&"value"in n))return e;var n;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:t.filter(Boolean))?n:[]}function h(e){var n=e.values,t=e.children;return(0,a.useMemo)((function(){var e=null!=n?n:function(e){return d(e).map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes,default:n.default}}))}(t);return function(e){var n=(0,c.l)(e,(function(e,n){return e.value===n.value}));if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[n,t])}function p(e){var n=e.value;return e.tabValues.some((function(e){return e.value===n}))}function g(e){var n=e.queryString,t=void 0!==n&&n,i=e.groupId,r=(0,l.k6)(),s=function(e){var n=e.queryString,t=void 0!==n&&n,a=e.groupId;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:t,groupId:i});return[(0,o._X)(s),(0,a.useCallback)((function(e){if(s){var n=new URLSearchParams(r.location.search);n.set(s,e),r.replace(Object.assign({},r.location,{search:n.toString()}))}}),[s,r])]}function f(e){var n,t,i,r,l=e.defaultValue,o=e.queryString,c=void 0!==o&&o,d=e.groupId,f=h(e),m=(0,a.useState)((function(){return function(e){var n,t=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+t+'" but none of its children has the corresponding value. Available values are: '+a.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return t}var i=null!=(n=a.find((function(e){return e.default})))?n:a[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:l,tabValues:f})})),y=m[0],v=m[1],b=g({queryString:c,groupId:d}),x=b[0],j=b[1],w=(n=function(e){return e?"docusaurus.tab."+e:null}({groupId:d}.groupId),t=(0,u.Nk)(n),i=t[0],r=t[1],[i,(0,a.useCallback)((function(e){n&&r.set(e)}),[n,r])]),T=w[0],_=w[1],k=function(){var e=null!=x?x:T;return p({value:e,tabValues:f})?e:null}();return(0,s.Z)((function(){k&&v(k)}),[k]),{selectedValue:y,selectValue:(0,a.useCallback)((function(e){if(!p({value:e,tabValues:f}))throw new Error("Can't select invalid tab value="+e);v(e),j(e),_(e)}),[j,_,f]),tabValues:f}}var m=t(72389);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=t(85893);function b(e){var n=e.className,t=e.block,a=e.selectedValue,l=e.selectValue,s=e.tabValues,o=[],c=(0,r.o5)().blockElementScrollPositionUntilNextRender,u=function(e){var n=e.currentTarget,t=o.indexOf(n),i=s[t].value;i!==a&&(c(n),l(i))},d=function(e){var n,t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":var a,i=o.indexOf(e.currentTarget)+1;t=null!=(a=o[i])?a:o[0];break;case"ArrowLeft":var r,l=o.indexOf(e.currentTarget)-1;t=null!=(r=o[l])?r:o[o.length-1]}null==(n=t)||n.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":t},n),children:s.map((function(e){var n=e.value,t=e.label,r=e.attributes;return(0,v.jsx)("li",Object.assign({role:"tab",tabIndex:a===n?0:-1,"aria-selected":a===n,ref:function(e){return o.push(e)},onKeyDown:d,onClick:u},r,{className:(0,i.Z)("tabs__item",y.tabItem,null==r?void 0:r.className,{"tabs__item--active":a===n}),children:null!=t?t:n}),n)}))})}function x(e){var n=e.lazy,t=e.children,i=e.selectedValue,r=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){var l=r.find((function(e){return e.props.value===i}));return l?(0,a.cloneElement)(l,{className:"margin-top--md"}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:r.map((function(e,n){return(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==i})}))})}function j(e){var n=f(e);return(0,v.jsxs)("div",{className:(0,i.Z)("tabs-container",y.tabList),children:[(0,v.jsx)(b,Object.assign({},e,n)),(0,v.jsx)(x,Object.assign({},e,n))]})}function w(e){var n=(0,m.Z)();return(0,v.jsx)(j,Object.assign({},e,{children:d(e.children)}),String(n))}},77229:(e,n,t)=>{t.d(n,{Ey:()=>u,O2:()=>o,SQ:()=>c});t(67294);var a=t(74866),i=t(85162),r=t(95665),l=t.n(r),s=t(85893);function o(e){var n=e.children;return Array.isArray(n)||(n=[n]),(0,s.jsx)(a.Z,{className:"language-tabs",groupId:"code-tabs",children:n.map((function(e,n){return(0,s.jsx)(i.Z,{value:e.props.value,label:e.props.value,children:e})}))})}function c(e){var n=e.children,t=e.language;return Array.isArray(n)||(n=[n]),n=n.map((function(e){return function(e,n){var t=e.props,a=(t.children,t.url),i=t.start,r=t.end,l=t.fname;if(e.type===u)return u({url:a,start:i,end:r,language:n,fname:l});return e}(e,t)})),1==n.length?(0,s.jsx)(i.Z,{value:0,label:n[0].props.fname,children:n[0]}):(0,s.jsx)(a.Z,{className:"file-tabs",children:n.map((function(e,n){return(0,s.jsx)(i.Z,{value:n,label:e.props.fname,children:e})}))})}function u(e){var n=e.url,t=e.start,a=e.end,i=e.language,r=e.fname,o=n+"#";return t&&a&&(o+="L"+t+"-L"+a+"#"),(0,s.jsx)(l(),{language:i,fname:r,children:o})}}}]);