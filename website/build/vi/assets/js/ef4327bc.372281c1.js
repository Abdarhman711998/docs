"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9501],{94795:(n,e,c)=>{c.r(e),c.d(e,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var s=c(85893),t=c(11151);const r={id:"create-transactions",title:"T\u1ea1o C\xe1c Transaction",sidebar_label:"T\u1ea1o Transaction"},i=void 0,a={id:"integrator/create-transactions",title:"T\u1ea1o C\xe1c Transaction",description:"\u0110\u1ec3 t\u1ea1o & x\u1eed l\xfd c\xe1c transaction b\u1ea1n s\u1ebd c\u1ea7n \u0111\u1ebfn th\u01b0 vi\u1ec7n API JavaScript c\u1ee7a ch\xfang t\xf4i: near-api-js. C\xf3 r\u1ea5t nhi\u1ec1u c\xe1ch \u0111\u1ec3 t\u1ea1o c\xe1c transaction nh\u01b0ng trong v\xed d\u1ee5 n\xe0y ch\xfang t\xf4i s\u1ebd ch\u1ec9 cho b\u1ea1n hai c\xe1ch \u0111\u1ec3 t\u1ea1o m\u1ed9t transaction \u0111\u01a1n gi\u1ea3n \u0111\u1ec3 transfer token.",source:"@site/i18n/vi/docusaurus-plugin-content-docs/current/6.integrator/create-transactions.md",sourceDirName:"6.integrator",slug:"/integrator/create-transactions",permalink:"/vi/integrator/create-transactions",draft:!1,unlisted:!1,editUrl:"https://github.com/near/docs/edit/master/website/../docs/6.integrator/create-transactions.md",tags:[],version:"current",lastUpdatedBy:"Github Actions",lastUpdatedAt:1705914809,formattedLastUpdatedAt:"22 thg 1, 2024",frontMatter:{id:"create-transactions",title:"T\u1ea1o C\xe1c Transaction",sidebar_label:"T\u1ea1o Transaction"},sidebar:"exchanges",previous:{title:"Accounts",permalink:"/vi/integrator/accounts"},next:{title:"Fungible Tokens",permalink:"/vi/integrator/fungible-tokens"}},o={},l=[{value:"HIGH LEVEL -- Create a transaction",id:"high-level----create-a-transaction",level:2},{value:"Setup",id:"setup",level:3},{value:"Imports",id:"imports",level:3},{value:"Accounts &amp; Network",id:"accounts--network",level:3},{value:"Formatting Token Amounts",id:"formatting-token-amounts",level:3},{value:"Create a Key Store",id:"create-a-key-store",level:3},{value:"Setting up a connection to NEAR",id:"setting-up-a-connection-to-near",level:3},{value:"Create, Sign, &amp; Send Transaction",id:"create-sign--send-transaction",level:3},{value:"LOW LEVEL -- Create a Transaction",id:"low-level----create-a-transaction",level:2},{value:"Setup",id:"setup-1",level:3},{value:"Imports",id:"imports-1",level:3},{value:"Accounts &amp; Network",id:"accounts--network-1",level:3},{value:"Formatting Token Amounts",id:"formatting-token-amounts-1",level:3},{value:"Setting up a connection to NEAR",id:"setting-up-a-connection-to-near-1",level:3},{value:"Access Keys",id:"access-keys",level:3},{value:"Transaction Requirements",id:"transaction-requirements",level:3},{value:"1 <code>signerId</code>",id:"1-signerid",level:3},{value:"2 <code>signerPublicKey</code>",id:"2-signerpublickey",level:3},{value:"3 <code>receiverId</code>",id:"3-receiverid",level:3},{value:"4 <code>nonceForPublicKey</code>",id:"4-nonceforpublickey",level:3},{value:"5 <code>actions</code>",id:"5-actions",level:3},{value:"6 <code>blockHash</code>",id:"6-blockhash",level:3},{value:"Constructing the Transaction",id:"constructing-the-transaction",level:3},{value:"Sign Transaction",id:"sign-transaction",level:3},{value:"Send Transaction",id:"send-transaction",level:3},{value:"Transaction Results",id:"transaction-results",level:3}];function d(n){const e={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.p,{children:["\u0110\u1ec3 t\u1ea1o & x\u1eed l\xfd c\xe1c transaction b\u1ea1n s\u1ebd c\u1ea7n \u0111\u1ebfn th\u01b0 vi\u1ec7n API JavaScript c\u1ee7a ch\xfang t\xf4i: ",(0,s.jsx)(e.a,{href:"/develop/integrate/frontend",children:(0,s.jsx)(e.code,{children:"near-api-js"})}),". C\xf3 r\u1ea5t nhi\u1ec1u c\xe1ch \u0111\u1ec3 t\u1ea1o c\xe1c transaction nh\u01b0ng trong v\xed d\u1ee5 n\xe0y ch\xfang t\xf4i s\u1ebd ch\u1ec9 cho b\u1ea1n hai c\xe1ch \u0111\u1ec3 t\u1ea1o m\u1ed9t transaction \u0111\u01a1n gi\u1ea3n \u0111\u1ec3 transfer token."]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"#high-level----create-a-transaction",children:"HIGH LEVEL"})," - ",(0,s.jsx)(e.em,{children:"C\xe1ch d\u1ec5 d\xe0ng nh\u1ea5t \u0111\u1ec3 t\u1ea1o m\u1ed9t transaction"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"#low-level----create-a-transaction",children:"LOW LEVEL"})," - ",(0,s.jsx)(e.em,{children:"th\u1ef1c hi\u1ec7n ch\xednh x\xe1c nh\u1eefng g\xec transaction \u1edf tr\xean \u0111ang l\xe0m, nh\u01b0ng s\u1ebd \u0111i v\xe0o chi ti\u1ebft t\u1eebng b\u01b0\u1edbc c\u1ee5 th\u1ec3 c\u1ee7a to\xe0n b\u1ed9 quy tr\xecnh cho nh\u1eefng ai quan t\xe2m"})]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"V\u1ec1 c\u1ed1t l\xf5i, t\u1ea5t c\u1ea3 c\xe1c transaction y\xeau c\u1ea7u nh\u1eefng ph\u1ea7n sau:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"signerId"})," ",(0,s.jsx)(e.em,{children:"(account ID c\u1ee7a ng\u01b0\u1eddi kh\u1edfi t\u1ea1o transaction)"})]}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"signerPublicKey"})}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"receiverId"})," ",(0,s.jsx)(e.em,{children:"(account ID c\u1ee7a ng\u01b0\u1eddi nh\u1eadn transaction)"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"nonceForPublicKey"})," ",(0,s.jsx)(e.em,{children:"(m\u1ed7i l\u1ea7n key \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng, gi\xe1 tr\u1ecb nonce n\xe0y s\u1ebd \u0111\u01b0\u1ee3c t\u0103ng l\xean 1)"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"actions"})," ",(0,s.jsxs)(e.em,{children:["( ",(0,s.jsx)(e.a,{href:"/concepts/protocol/transactions#action",children:"[click here]"})," for supported arguments)"]})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"blockHash"})," ",(0,s.jsx)(e.em,{children:"(hash c\u1ee7a block hi\u1ec7n t\u1ea1i (trong v\xf2ng 24 gi\u1edd) \u0111\u1ec3 ch\u1ee9ng minh transaction \u0111\xf3 v\u1eeba \u0111\u01b0\u1ee3c t\u1ea1o)"})]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["See ",(0,s.jsx)(e.a,{href:"https://near.github.io/near-api-js/classes/near_api_js.transaction.Transaction.html",children:"Transaction Class"})," for a more in depth outline."]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"high-level----create-a-transaction",children:"HIGH LEVEL -- Create a transaction"}),"\n",(0,s.jsx)(e.h3,{id:"setup",children:"Setup"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["Clone repository ",(0,s.jsx)(e.a,{href:"https://github.com/near-examples/transaction-examples",children:"transaction-examples"})," b\u1eb1ng c\xe1ch ch\u1ea1y:"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"git clone https://github.com/near-examples/transaction-examples.git\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"2",children:["\n",(0,s.jsxs)(e.li,{children:["Follow ",(0,s.jsx)(e.a,{href:"https://github.com/near-examples/transaction-examples/blob/master/README.md#prerequisites",children:"setup instructions"})]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"imports",children:"Imports"}),"\n",(0,s.jsxs)(e.p,{children:["Trong file ",(0,s.jsx)(e.a,{href:"https://github.com/near-examples/transaction-examples/blob/9e999253aafa2c3e3b537810a0b8ce7596c3506c/send-tokens-easy.js#L1-L5",children:(0,s.jsx)(e.code,{children:"send-tokens-easy.js"})})," ch\xfang ta s\u1eed d\u1ee5ng hai dependency:"]}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://github.com/near/near-api-js",children:"Th\u01b0 vi\u1ec7n API JavaScript c\u1ee7a NEAR"})}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://www.npmjs.com/package/dotenv",children:(0,s.jsx)(e.code,{children:"dotenv"})})," (d\xf9ng \u0111\u1ec3 load nh\u1eefng environment variable cho private key)"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:'const nearAPI = require("near-api-js");\nconst { connect, KeyPair, keyStores, utils } = nearAPI;\nrequire("dotenv").config();\n'})}),"\n",(0,s.jsx)(e.p,{children:"D\xf2ng th\u1ee9 hai \u1edf tr\xean ph\xe2n gi\u1ea3i m\xf4t v\xe0i ti\u1ec7n \xedch trong nearAPI, m\xe0 b\u1ea1n s\u1ebd s\u1eed d\u1ee5ng ch\xfang \u0111\u1ec3 thao t\xe1c v\u1edbi blockchain."}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"connect"})," - truy\u1ec1n v\xe0o c\xe1c variable thi\u1ebft l\u1eadp \u0111\u1ec3 t\u1ea1o k\u1ebft n\u1ed1i t\u1edbi NEAR"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"KeyPair"})," - t\u1ea1o m\u1ed9t keyPair t\u1eeb private key m\xe0 b\u1ea1n s\u1ebd \u0111\u01b0a v\xe0o trong m\u1ed9t file ",(0,s.jsx)(e.code,{children:".env"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"keyStores"})," - l\u01b0u tr\u1eef keyPair m\xe0 b\u1ea1n s\u1ebd t\u1ea1o t\u1eeb private key v\xe0 d\xf9ng n\xf3 \u0111\u1ec3 sign c\xe1c Transaction"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"utils"})," - \u0111\u01b0\u1ee3c d\xf9ng \u0111\u1ec3 format c\xe1c kho\u1ea3n ti\u1ec1n trong NEAR"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"accounts--network",children:"Accounts & Network"}),"\n",(0,s.jsxs)(e.p,{children:["Ti\u1ebfp theo, b\u1ea1n s\u1ebd c\u1ea7n \u0111i\u1ec1n ",(0,s.jsx)(e.code,{children:"accountId"})," c\u1ee7a ",(0,s.jsx)(e.code,{children:"sender"})," v\xe0 ",(0,s.jsx)(e.code,{children:"receiver"}),", c\u0169ng nh\u01b0 l\xe0 ",(0,s.jsx)(e.code,{children:"networkId"})," (",(0,s.jsx)(e.code,{children:"betanet"}),", ",(0,s.jsx)(e.code,{children:"testnet"}),", ho\u1eb7c ",(0,s.jsx)(e.code,{children:"mainnet"}),")."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:'const sender = "sender.testnet";\nconst receiver = "receiver.testnet";\nconst networkId = "testnet";\n'})}),"\n",(0,s.jsx)(e.h3,{id:"formatting-token-amounts",children:"Formatting Token Amounts"}),"\n",(0,s.jsxs)(e.p,{children:["Khi g\u1eedi c\xe1c NEAR token (\u24c3) trong m\u1ed9t transaction, kho\u1ea3n ti\u1ec1n n\xe0y c\u1ea7n \u0111\u01b0\u1ee3c chuy\u1ec1n th\xe0nh ",(0,s.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Yocto-",children:"Yocto"})," \u24c3 hay (10^-24)."]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u0110\u1ec3 l\xe0m \u0111i\u1ec1u n\xe0y b\u1ea1n s\u1ebd d\xf9ng method ",(0,s.jsx)(e.a,{href:"https://github.com/near/near-api-js/blob/d4d4cf1ac3182fa998b1e004e6782219325a641b/src/utils/format.ts#L53-L63",children:(0,s.jsx)(e.code,{children:"parseNearAmount()"})})," c\u1ee7a ",(0,s.jsx)(e.a,{href:"https://github.com/near/near-api-js",children:(0,s.jsx)(e.code,{children:"near-api-js"})})," (n\u1eb1m t\u1ea1i ",(0,s.jsx)(e.code,{children:"utils/format"}),")"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:'const amount = nearAPI.utils.format.parseNearAmount("1.5");\n'})}),"\n",(0,s.jsx)(e.h3,{id:"create-a-key-store",children:"Create a Key Store"}),"\n",(0,s.jsxs)(e.p,{children:['In order to sign transactions you will need to create a "Key Store" that will hold a ',(0,s.jsx)(e.a,{href:"/concepts/protocol/access-keys#full-access-keys",children:"full access key"})," to sign your transactions. C\xf3 m\u1ed9t v\xe0i c\xe1ch \u0111\u1ec3 ho\xe0n t\u1ea5t vi\u1ec7c n\xe0y, nh\u01b0ng trong v\xed d\u1ee5 n\xe0y ch\xfang ta s\u1ebd s\u1eed d\u1ee5ng private key \u0111\xe3 \u0111\u01b0\u1ee3c l\u01b0u trong file ",(0,s.jsx)(e.code,{children:".env"})," trong project c\u1ee7a b\u1ea1n, ho\u1eb7c m\u1ed9t environment variable \u0111\u01b0\u1ee3c export to\xe0n c\u1ee5c."]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["N\u1ebfu b\u1ea1n \u0111\xe3 t\u1ea1o account b\u1eb1ng c\xe1ch d\xf9ng ",(0,s.jsx)(e.a,{href:"/tools/near-cli",children:(0,s.jsx)(e.code,{children:"near-cli"})})," ho\u1eb7c \u0111\xe3 ch\u1ea1y ",(0,s.jsx)(e.a,{href:"/tools/near-cli#for-accounts",children:(0,s.jsx)(e.code,{children:"near login"})})," trong terminal c\u1ee7a b\u1ea1n, th\xec private key c\u1ee7a b\u1ea1n c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c t\xecm th\u1ea5y trong file ",(0,s.jsx)(e.code,{children:".json"})," n\u1eb1m t\u1ea1i ",(0,s.jsx)(e.code,{children:"/HOME/.near-credentials"}),"."]}),"\n",(0,s.jsxs)(e.li,{children:["If you created an account using ",(0,s.jsx)(e.a,{href:"https://testnet.mynearwallet.com/",children:"NEAR Wallet"}),", your key will be found in your browser's ",(0,s.jsx)(e.code,{children:"Local Storage"}),".","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Trong dev tools c\u1ee7a browser... ",(0,s.jsx)(e.code,{children:"Application"})," >> ",(0,s.jsx)(e.code,{children:"Storage"})," >> ",(0,s.jsx)(e.code,{children:"Local Storage"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"// thi\u1ebft l\u1eadp m\u1ed9t object keyStore tr\u1ed1ng trong memory b\u1eb1ng near-api-js\nconst keyStore = new keyStores.InMemoryKeyStore();\n// t\u1ea1o m\u1ed9t keyPair t\u1eeb private key \u0111\u01b0\u1ee3c cung c\u1ea5p trong file .env c\u1ee7a b\u1ea1n\nconst keyPair = KeyPair.fromString(process.env.SENDER_PRIVATE_KEY);\n// th\xeam key b\u1ea1n v\u1eeba t\u1ea1o v\xe0o keyStore c\u1ee7a b\u1ea1n, n\xf3 c\xf3 th\u1ec3 gi\u1eef nhi\u1ec1u key (ph\u1ea3i n\u1eb1m trong m\u1ed9t async function)\nawait keyStore.setKey(networkId, sender, keyPair);\n"})}),"\n",(0,s.jsx)(e.h3,{id:"setting-up-a-connection-to-near",children:"Setting up a connection to NEAR"}),"\n",(0,s.jsxs)(e.p,{children:["B\xe2y gi\u1edd t\u1ea1o m\u1ed9t k\u1ebft n\u1ed1i t\u1edbi NEAR s\u1eed d\u1ee5ng m\u1ed9t configuration object, n\xf3 s\u1ebd ch\u1ee9a ",(0,s.jsx)(e.code,{children:"networkId"})," \u0111\xe3 \u0111\u01b0\u1ee3c c\xe0i \u0111\u1eb7t tr\u01b0\u1edbc \u0111\xf3 c\u0169ng nh\u01b0 ",(0,s.jsx)(e.code,{children:"keyStore"})," c\u1ee7a b\u1ea1n."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:'// configuration used to connect to NEAR\nconst prefix = (networkId === "testnet") ? "testnet" : "www";\n\nconst config = {\n  networkId,\n  keyStore,\n  nodeUrl: `https://rpc.${networkId}.near.org`,\n  walletUrl: `https://wallet.${networkId}.near.org`,\n  helperUrl: `https://helper.${networkId}.near.org`,\n  explorerUrl: `https://${prefix}.nearblocks.io`,\n};\n\n// connect to NEAR! :)\nconst near = await connect(config);\n// t\u1ea1o m\u1ed9t object NEAR account\nconst senderAccount = await near.account(sender);\n'})}),"\n",(0,s.jsxs)(e.p,{children:["B\u1ea1n s\u1ebd b\xe1o cho d\xf2ng cu\u1ed1i s\u1eed d\u1ee5ng k\u1ebft n\u1ed1i t\u1edbi NEAR c\u1ee7a b\u1ea1n \u0111\u1ec3 t\u1ea1o m\u1ed9t object ",(0,s.jsx)(e.code,{children:"senderAccount"})," m\xe0 b\u1ea1n s\u1ebd d\xf9ng \u0111\u1ec3 th\u1ef1c hi\u1ec7n m\u1ed9t transaction."]}),"\n",(0,s.jsx)(e.h3,{id:"create-sign--send-transaction",children:"Create, Sign, & Send Transaction"}),"\n",(0,s.jsx)(e.p,{children:"B\xe2y gi\u1edd b\u1ea1n \u0111\xe3 c\xe0i \u0111\u1eb7t m\u1ecdi th\u1ee9, kh\u1edfi t\u1ea1o transaction b\u1eb1ng ch\u1ec9 b\u1eb1ng m\u1ed9t d\xf2ng code."}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"const result = await senderAccount.sendMoney(receiver, amount);\n"})}),"\n",(0,s.jsxs)(e.p,{children:["Command \u0111\u01a1n gi\u1ea3n n\xe0y s\u1ebd kh\u1edfi t\u1ea1o, sign, v\xe0 g\u1eedi m\u1ed9t transaction v\u1ec1 vi\u1ec7c transfer token tr\xean NEAR blockchain. There is no need to create a ",(0,s.jsx)(e.code,{children:"result"})," variable aside from inspecting the response details from your transaction and even create a link to ",(0,s.jsx)(e.a,{href:"https://testnet.nearblocks.io/",children:"NearBlocks Explorer"})," to view a GUI version of the transaction details."]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"low-level----create-a-transaction",children:"LOW LEVEL -- Create a Transaction"}),"\n",(0,s.jsx)(e.h3,{id:"setup-1",children:"Setup"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["Clone repository ",(0,s.jsx)(e.a,{href:"https://github.com/near-examples/transaction-examples",children:"transaction-examples"})," b\u1eb1ng c\xe1ch ch\u1ea1y:"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"git clone https://github.com/near-examples/transaction-examples.git\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"2",children:["\n",(0,s.jsxs)(e.li,{children:["Follow ",(0,s.jsx)(e.a,{href:"https://github.com/near-examples/transaction-examples/blob/master/README.md#prerequisites",children:"setup instructions"})]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"imports-1",children:"Imports"}),"\n",(0,s.jsxs)(e.p,{children:["Trong file ",(0,s.jsx)(e.a,{href:"https://github.com/near-examples/transaction-examples/blob/master/send-tokens-deconstructed.js#L1-L4",children:(0,s.jsx)(e.code,{children:"send-tokens-deconstructed.js"})})," ch\xfang ta s\u1eed d\u1ee5ng ba dependency:"]}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://github.com/near/near-api-js",children:"Th\u01b0 vi\u1ec7n API JavaScript c\u1ee7a NEAR"})}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://www.npmjs.com/package/js-sha256",children:(0,s.jsx)(e.code,{children:"js-sha256"})})," (gi\u1ea3i thu\u1eadt hash m\xe3 h\xf3a)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://www.npmjs.com/package/dotenv",children:(0,s.jsx)(e.code,{children:"dotenv"})})," (d\xf9ng \u0111\u1ec3 load c\xe1c environment variable)"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:'const nearAPI = require("near-api-js");\nconst sha256 = require("js-sha256");\nrequire("dotenv").config();\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"accounts--network-1",children:"Accounts & Network"}),"\n",(0,s.jsxs)(e.p,{children:["Ti\u1ebfp theo, b\u1ea1n s\u1ebd c\u1ea7n \u0111i\u1ec1n ",(0,s.jsx)(e.code,{children:"accountId"})," c\u1ee7a ",(0,s.jsx)(e.code,{children:"sender"})," v\xe0 ",(0,s.jsx)(e.code,{children:"receiver"}),", c\u0169ng nh\u01b0 l\xe0 ",(0,s.jsx)(e.code,{children:"networkId"})," (",(0,s.jsx)(e.code,{children:"betanet"}),", ",(0,s.jsx)(e.code,{children:"testnet"}),", ho\u1eb7c ",(0,s.jsx)(e.code,{children:"mainnet"}),")."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:'const sender = "sender.testnet";\nconst receiver = "receiver.testnet";\nconst networkId = "testnet";\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"formatting-token-amounts-1",children:"Formatting Token Amounts"}),"\n",(0,s.jsxs)(e.p,{children:["Khi g\u1eedi c\xe1c NEAR token (\u24c3) trong m\u1ed9t transaction, kho\u1ea3n ti\u1ec1n n\xe0y c\u1ea7n \u0111\u01b0\u1ee3c chuy\u1ec1n th\xe0nh ",(0,s.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Yocto-",children:"Yocto"})," \u24c3 hay (10^-24)."]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u0110\u1ec3 l\xe0m \u0111i\u1ec1u n\xe0y b\u1ea1n s\u1ebd d\xf9ng method ",(0,s.jsx)(e.a,{href:"https://github.com/near/near-api-js/blob/d4d4cf1ac3182fa998b1e004e6782219325a641b/src/utils/format.ts#L53-L63",children:(0,s.jsx)(e.code,{children:"parseNearAmount()"})})," c\u1ee7a ",(0,s.jsx)(e.a,{href:"https://github.com/near/near-api-js",children:(0,s.jsx)(e.code,{children:"near-api-js"})})," (n\u1eb1m t\u1ea1i ",(0,s.jsx)(e.code,{children:"utils/format"}),")"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:'const amount = nearAPI.utils.format.parseNearAmount("1.5");\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"setting-up-a-connection-to-near-1",children:"Setting up a connection to NEAR"}),"\n",(0,s.jsxs)(e.p,{children:["Trong v\xed d\u1ee5 n\xe0y, ch\xfang ta s\u1ebd t\u1ea1o m\u1ed9t NEAR RPC ",(0,s.jsx)(e.code,{children:"provider"}),", n\xf3 s\u1ebd cho ph\xe9p ch\xfang ta t\u01b0\u01a1ng t\xe1c v\u1edbi chain th\xf4ng qua ",(0,s.jsx)(e.a,{href:"/api/rpc/introduction",children:"c\xe1c RPC endpoint"}),"."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"const provider = new nearAPI.providers.JsonRpcProvider(\n  `https://rpc.${networkId}.near.org`\n);\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"access-keys",children:"Access Keys"}),"\n",(0,s.jsxs)(e.p,{children:["\u0110\u1ec3 sign m\u1ed9t transaction \u0111\u1ec3 g\u1eedi NEAR \u24c3, ch\xfang ta c\u1ea7n m\u1ed9t ",(0,s.jsx)(e.code,{children:"FullAccess"})," key v\xe0o account c\u1ee7a ng\u01b0\u1eddi g\u1eedi."]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["N\u1ebfu b\u1ea1n \u0111\xe3 t\u1ea1o account b\u1eb1ng c\xe1ch d\xf9ng ",(0,s.jsx)(e.a,{href:"/tools/near-cli",children:(0,s.jsx)(e.code,{children:"near-cli"})})," ho\u1eb7c \u0111\xe3 ch\u1ea1y ",(0,s.jsx)(e.a,{href:"/tools/near-cli#for-accounts",children:(0,s.jsx)(e.code,{children:"near login"})})," trong terminal c\u1ee7a b\u1ea1n, th\xec private key c\u1ee7a b\u1ea1n c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c t\xecm th\u1ea5y trong file ",(0,s.jsx)(e.code,{children:".json"})," n\u1eb1m t\u1ea1i ",(0,s.jsx)(e.code,{children:"/HOME/.near-credentials"}),"."]}),"\n",(0,s.jsxs)(e.li,{children:["If you created an account using ",(0,s.jsx)(e.a,{href:"https://testnet.mynearwallet.com/",children:"NEAR Wallet"}),", your key will be found in your browser's ",(0,s.jsx)(e.code,{children:"Local Storage"}),".","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Trong dev tools c\u1ee7a browser... ",(0,s.jsx)(e.code,{children:"Application"})," >> ",(0,s.jsx)(e.code,{children:"Storage"})," >> ",(0,s.jsx)(e.code,{children:"Local Storage"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["M\u1ed9t khi b\u1ea1n c\xf3 quy\u1ec1n truy c\u1eadp v\xe0o private key c\u1ee7a account ng\u01b0\u1eddi g\u1eedi, t\u1ea1o m\u1ed9t environment variable ",(0,s.jsx)(e.code,{children:"SENDER_PRIVATE_KEY"})," ho\u1eb7c hard code n\xf3 trong m\u1ed9t string nh\u01b0 trong ",(0,s.jsx)(e.a,{href:"https://github.com/near-examples/transaction-examples/blob/master/send-tokens-deconstructed.js#L18",children:"d\xf2ng 18"})," c\u1ee7a file ",(0,s.jsx)(e.code,{children:"send-tokens.js"}),"."]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["V\u1edbi ",(0,s.jsx)(e.code,{children:"privateKey"})," n\xe0y, ch\xfang ta c\xf3 th\u1ec3 kh\u1edfi t\u1ea1o m\u1ed9t object ",(0,s.jsx)(e.code,{children:"keyPair"})," \u0111\u1ec3 sign c\xe1c transaction."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"const privateKey = process.env.SENDER_PRIVATE_KEY;\nconst keyPair = nearAPI.KeyPair.fromString(privateKey);\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"transaction-requirements",children:"Transaction Requirements"}),"\n",(0,s.jsx)(e.p,{children:"Nh\u01b0 \u0111\xe3 n\xeau \u1edf tr\xean, t\u1ea5t c\u1ea3 c\xe1c transaction y\xeau c\u1ea7u s\xe1u ph\u1ea7n sau:"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#1-signerid",children:(0,s.jsx)(e.code,{children:"signerId"})})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#2-signerpublickey",children:(0,s.jsx)(e.code,{children:"signerPublicKey"})})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#3-receiverid",children:(0,s.jsx)(e.code,{children:"receiverId"})})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#4-nonceforpublickey",children:(0,s.jsx)(e.code,{children:"nonceForPublicKey"})})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"/concepts/protocol/transactions#action",children:(0,s.jsx)(e.code,{children:"actions"})})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#6-blockhash",children:(0,s.jsx)(e.code,{children:"blockHash"})})}),"\n"]}),"\n",(0,s.jsxs)(e.h3,{id:"1-signerid",children:["1 ",(0,s.jsx)(e.code,{children:"signerId"})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"signerId"})," l\xe0 m\u1ed9t account ID c\u1ee7a ng\u01b0\u1eddi kh\u1edfi t\u1ea1o transaction."]}),"\n",(0,s.jsxs)(e.li,{children:["Gi\xe1 tr\u1ecb n\xe0y \u0111\u01b0\u1ee3c truy\u1ec1n v\xe0o d\u01b0\u1edbi d\u1ea1ng m\u1ed9t string (v\xed d\u1ee5: ",(0,s.jsx)(e.code,{children:"'example.testnet'"})," ho\u1eb7c ",(0,s.jsx)(e.code,{children:"'bob.near'"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(e.h3,{id:"2-signerpublickey",children:["2 ",(0,s.jsx)(e.code,{children:"signerPublicKey"})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"signerPublicKey"})," \u0111\u01b0\u1ee3c y\xeau c\u1ea7u d\u01b0\u1edbi d\u1ea1ng m\u1ed9t object v\u1edbi hai c\u1eb7p key value: ",(0,s.jsx)(e.code,{children:"keyType"})," and ",(0,s.jsx)(e.code,{children:"data"}),"."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"PublicKey = {\n  keyType: 0,\n  data: Uint8Array(32)[\n    (190,\n    150,\n    152,\n    145,\n    232,\n    248,\n    128,\n    151,\n    167,\n    165,\n    128,\n    46,\n    20,\n    231,\n    103,\n    142,\n    39,\n    56,\n    152,\n    46,\n    135,\n    1,\n    161,\n    180,\n    94,\n    212,\n    195,\n    201,\n    73,\n    190,\n    70,\n    242)\n  ],\n};\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u0110i\u1ec1u n\xe0y c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c kh\u1edfi t\u1ea1o b\u1eb1ng c\xe1ch g\u1ecdi method ",(0,s.jsx)(e.code,{children:"getPublicKey()"})," s\u1eed d\u1ee5ng variable ",(0,s.jsx)(e.code,{children:"keyPair"})," m\xe0 ch\xfang ta ",(0,s.jsx)(e.a,{href:"#access-keys",children:"\u0111\xe3 c\xe0i \u0111\u1eb7t tr\u01b0\u1edbc \u0111\xf3"}),"."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"const publicKey = keyPair.getPublicKey();\n"})}),"\n",(0,s.jsxs)(e.h3,{id:"3-receiverid",children:["3 ",(0,s.jsx)(e.code,{children:"receiverId"})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"receiverId"})," l\xe0 account ID c\u1ee7a ng\u01b0\u1eddi nh\u1eadn transaction."]}),"\n",(0,s.jsxs)(e.li,{children:["Gi\xe1 tr\u1ecb n\xe0y \u0111\u01b0\u1ee3c truy\u1ec1n v\xe0o d\u01b0\u1edbi d\u1ea1ng m\u1ed9t string (v\xed d\u1ee5: ",(0,s.jsx)(e.code,{children:"'example.testnet'"})," ho\u1eb7c ",(0,s.jsx)(e.code,{children:"'bob.near'"}),")"]}),"\n",(0,s.jsxs)(e.li,{children:["Trong m\u1ed9t s\u1ed1 tr\u01b0\u1eddng h\u1ee3p nh\u1ea5t \u0111\u1ecbnh, ",(0,s.jsx)(e.code,{children:"signerId"})," v\xe0 ",(0,s.jsx)(e.code,{children:"receiverId"})," c\xf3 th\u1ec3 l\xe0 c\xf9ng m\u1ed9t account."]}),"\n"]}),"\n",(0,s.jsxs)(e.h3,{id:"4-nonceforpublickey",children:["4 ",(0,s.jsx)(e.code,{children:"nonceForPublicKey"})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["M\u1ed9t s\u1ed1 duy nh\u1ea5t ho\u1eb7c m\u1ed9t gi\xe1 tr\u1ecb ",(0,s.jsx)(e.code,{children:"nonce"})," \u0111\u01b0\u1ee3c y\xeau c\u1ea7u cho m\u1ed7i transaction, \u0111\u01b0\u1ee3c sign b\u1edfi m\u1ed9t access key."]}),"\n",(0,s.jsxs)(e.li,{children:["\u0110\u1ec3 \u0111\u1ea3m b\u1ea3o ch\u1ec9 m\u1ed9t s\u1ed1 duy nh\u1ea5t \u0111\u01b0\u1ee3c t\u1ea1o ra cho m\u1ed7i transaction, gi\xe1 tr\u1ecb ",(0,s.jsx)(e.code,{children:"nonce"})," hi\u1ec7n t\u1ea1i ph\u1ea3i \u0111\u01b0\u1ee3c query v\xe0 sau \u0111\xf3 t\u0103ng l\xean 1."]}),"\n",(0,s.jsxs)(e.li,{children:["Gi\xe1 tr\u1ecb nonce hi\u1ec7n t\u1ea1i c\xf3 th\u1ec3 nh\u1eadn \u0111\u01b0\u1ee3c b\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng variable ",(0,s.jsx)(e.code,{children:"provider"})," m\xe0 ch\xfang ta ",(0,s.jsx)(e.a,{href:"#setting-up-a-connection-to-near",children:"\u0111\xe3 t\u1ea1o tr\u01b0\u1edbc \u0111\xf3"}),"."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:'const accessKey = await provider.query(\n  `access_key/${sender}/${publicKey.toString()}`,\n  ""\n);\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["b\xe2y gi\u1edd ch\xfang ta c\xf3 th\u1ec3 t\u1ea1o m\u1ed9t s\u1ed1 duy nh\u1ea5t cho transaction c\u1ee7a ch\xfang ta b\u1eb1ng c\xe1ch t\u0103ng gi\xe1 tr\u1ecb ",(0,s.jsx)(e.code,{children:"nonce"})," hi\u1ec7n t\u1ea1i."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"const nonce = ++accessKey.nonce;\n"})}),"\n",(0,s.jsxs)(e.h3,{id:"5-actions",children:["5 ",(0,s.jsx)(e.code,{children:"actions"})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Hi\u1ec7n t\u1ea1i, c\xf3 t\xe1m lo\u1ea1i ",(0,s.jsx)(e.code,{children:"Action"})," \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3. ",(0,s.jsx)(e.a,{href:"/concepts/protocol/transactions#action",children:"[see here]"})]}),"\n",(0,s.jsxs)(e.li,{children:["Trong v\xed d\u1ee5 n\xe0y, ch\xfang ta s\u1eed d\u1ee5ng ",(0,s.jsx)(e.code,{children:"Transfer"})]}),"\n",(0,s.jsxs)(e.li,{children:["Action transfer n\xe0y c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c t\u1ea1o b\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng ",(0,s.jsxs)(e.a,{href:"#imports",children:["object ",(0,s.jsx)(e.code,{children:"nearAPI"})," \u0111\xe3 \u0111\u01b0\u1ee3c import"]})," v\xe0",(0,s.jsx)(e.a,{href:"#formatting-token-amounts",children:"amount \u24c3 \u0111\xe3 \u0111\u01b0\u1ee3c format"})," \u0111\u01b0\u1ee3c t\u1ea1o ra tr\u01b0\u1edbc \u0111\xf3."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"const actions = [nearAPI.transactions.transfer(amount)];\n"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.a,{href:"https://github.com/near/near-api-js/blob/d4d4cf1ac3182fa998b1e004e6782219325a641b/src/transaction.ts#L70-L72",children:"[b\u1ea5m v\xe0o \u0111\xe2y]"})," \u0111\u1ec3 xem source c\u1ee7a method ",(0,s.jsx)(e.code,{children:"transfer()"}),"."]}),"\n",(0,s.jsxs)(e.h3,{id:"6-blockhash",children:["6 ",(0,s.jsx)(e.code,{children:"blockHash"})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"M\u1ed7i transaction y\xeau c\u1ea7u m\u1ed9t hash c\u1ee7a block hi\u1ec7n t\u1ea1i (trong 24 gi\u1edd) \u0111\u1ec3 ch\u1ee9ng m\xecnh r\u1eb1ng transaction n\xe0y v\u1eeba \u0111\u01b0\u1ee3c t\u1ea1o."}),"\n",(0,s.jsxs)(e.li,{children:["Hash ph\u1ea3i \u0111\u01b0\u1ee3c chuy\u1ec3n th\xe0nh m\u1ed9t byte array b\u1eb1ng c\xe1c d\xf9ng method ",(0,s.jsx)(e.code,{children:"base_decode"})," n\u1eb1m trong ",(0,s.jsx)(e.a,{href:"#imports",children:(0,s.jsx)(e.code,{children:"nearAPI"})}),"."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"const recentBlockHash = nearAPI.utils.serialize.base_decode(\n  accessKey.block_hash\n);\n"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.a,{href:"https://github.com/near/near-api-js/blob/d4d4cf1ac3182fa998b1e004e6782219325a641b/src/utils/serialize.ts#L16-L17",children:"[b\u1ea5m v\xe0o \u0111\xe2y]"})," \u0111\u1ec3 view source c\u1ee7a method ",(0,s.jsx)(e.code,{children:"base_decode()"}),"."]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"constructing-the-transaction",children:"Constructing the Transaction"}),"\n",(0,s.jsxs)(e.p,{children:["B\xe2y gi\u1edd, ch\xfang ta c\xf3 th\u1ec3 t\u1ea1o transaction b\u1eb1ng t\u1ea5t c\u1ea3 ",(0,s.jsx)(e.a,{href:"#transaction-requirements",children:"c\xe1c tham s\u1ed1 y\xeau c\u1ea7u"})," \u1edf tr\xean."]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["S\u1eed d\u1ee5ng ",(0,s.jsx)(e.a,{href:"#imports",children:(0,s.jsx)(e.code,{children:"nearAPI"})}),", ch\xfang ta call method ",(0,s.jsx)(e.code,{children:"createTransaction()"})," \u0111\u1ec3 th\u1ef1c hi\u1ec7n c\xf4ng vi\u1ec7c n\xe0y."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"const transaction = nearAPI.transactions.createTransaction(\n  sender,\n  publicKey,\n  receiver,\n  nonce,\n  actions,\n  recentBlockHash\n);\n"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.a,{href:"https://github.com/near/near-api-js/blob/d4d4cf1ac3182fa998b1e004e6782219325a641b/src/transaction.ts#L95-L110",children:"[b\u1ea5m v\xe0o \u0111\xe2y]"})," \u0111\u1ec3 xem source code c\u1ee7a class Transaction"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"sign-transaction",children:"Sign Transaction"}),"\n",(0,s.jsx)(e.p,{children:"B\xe2y gi\u1edd transaction \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ea1o ra, ch\xfang ta sign n\xf3 tr\u01b0\u1edbc khi g\u1eedi n\xf3 \u0111\u1ebfn NEAR blockchain. \u1ede t\u1ea7ng th\u1ea5p nh\u1ea5t, c\xf3 b\u1ed1n b\u01b0\u1edbc cho qu\xe1 tr\xecnh n\xe0y."}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["S\u1eed d\u1ee5ng ",(0,s.jsx)(e.a,{href:"#imports",children:(0,s.jsx)(e.code,{children:"nearAPI"})}),", ch\xfang ta call method ",(0,s.jsx)(e.code,{children:"serialize()"})," \u0111\u1ec3 serialize transaction b\u1eb1ng ",(0,s.jsx)(e.a,{href:"https://borsh.io/",children:"Borsh"}),"."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"const serializedTx = nearAPI.utils.serialize.serialize(\n  nearAPI.transactions.SCHEMA.Transaction,\n  transaction\n);\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"2",children:["\n",(0,s.jsxs)(e.li,{children:["Hash transaction \u0111\xe3 \u0111\u01b0\u1ee3c serialize s\u1eed d\u1ee5ng gi\u1ea3i thu\u1eadt hash m\xe3 h\xf3a ",(0,s.jsx)(e.code,{children:"sha256"}),"."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"const serializedTxHash = new Uint8Array(sha256.sha256.array(serializedTx));\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"3",children:["\n",(0,s.jsxs)(e.li,{children:["T\u1ea1o m\u1ed9t signature v\u1edbi ",(0,s.jsx)(e.code,{children:"keyPair"}),"."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"const signature = keyPair.sign(serializedTxHash);\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"4",children:["\n",(0,s.jsxs)(e.li,{children:["T\u1ea1o m\u1ed9t transaction \u0111\xe3 sign b\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng ",(0,s.jsx)(e.a,{href:"https://github.com/near/near-api-js/blob/d4d4cf1ac3182fa998b1e004e6782219325a641b/src/transaction.ts#L112-L123",children:"class SignedTransaction"})," c\u1ee7a ",(0,s.jsx)(e.code,{children:"near-api-js"}),"."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"const signedTransaction = new nearAPI.transactions.SignedTransaction({\n  transaction,\n  signature: new nearAPI.transactions.Signature({\n    keyType: transaction.publicKey.keyType,\n    data: signature.signature,\n  }),\n});\n"})}),"\n",(0,s.jsx)(e.h3,{id:"send-transaction",children:"Send Transaction"}),"\n",(0,s.jsx)(e.p,{children:"B\u01b0\u1edbc cu\u1ed1i c\xf9ng l\xe0 encode v\xe0 g\u1eedi transaction n\xe0y."}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u0110\u1ea7u ti\xean ch\xfang ta serialize transaction b\u1eb1ng ",(0,s.jsx)(e.a,{href:"https://borsh.io/",children:"Borsh"}),", v\xe0 l\u01b0u k\u1ebft qu\u1ea3 trong variable ",(0,s.jsx)(e.code,{children:"signedSerializedTx"}),". ",(0,s.jsx)(e.em,{children:"(b\u1eaft bu\u1ed9c v\u1edbi t\u1ea5t c\u1ea3 c\xe1c transaction)"})]}),"\n",(0,s.jsxs)(e.li,{children:["Sau \u0111\xf3 ch\xfang ta g\u1eedi transaction th\xf4ng qua m\u1ed9t ",(0,s.jsx)(e.a,{href:"/api/rpc/introduction",children:"RPC call"})," s\u1eed d\u1ee5ng method ",(0,s.jsx)(e.code,{children:"sendJsonRpc()"})," n\u1eb1m trong ",(0,s.jsx)(e.a,{href:"#setting-up-connection-to-near",children:(0,s.jsx)(e.code,{children:"near"})}),"."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:'// encode transaction b\u1eb1ng Borsh serialize (b\u1eaft bu\u1ed9c v\u1edbi t\u1ea5t c\u1ea3 c\xe1c transaction)\nconst signedSerializedTx = signedTransaction.encode();\n// g\u1eedi transaction t\u1edbi NEAR blockchain th\xf4ng qua JSON RPC call v\xe0 ghi l\u1ea1i k\u1ebft qu\u1ea3\nconst result = await provider.sendJsonRpc("broadcast_tx_commit", [\n  Buffer.from(signedSerializedTx).toString("base64"),\n]);\n'})}),"\n",(0,s.jsx)(e.h3,{id:"transaction-results",children:"Transaction Results"}),"\n",(0,s.jsx)(e.p,{children:"C\xe1c k\u1ebft qu\u1ea3 chi ti\u1ebft c\u1ee7a transction \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 d\u01b0\u1edbi d\u1ea1ng sau:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"{\n  status: { SuccessValue: '' },\n  transaction: {\n    signer_id: 'sender.testnet',\n    public_key: 'ed25519:8RazSLHvzj4TBSKGUo5appP7wVeqZNQYjP9hvhF4ZKS2',\n    nonce: 57,\n    receiver_id: 'receiver.testnet',\n    actions: [ [Object] ],\n    signature: 'ed25519:2sK53w6hybSxX7qWShXz6xKnjnYRUW7Co3evEaaggNW6pGSCNPvx7urY4akwnzAbxZGwsKjx8dcVm73qbitntJjz',\n    hash: 'EgGzB73eFxCwZRGcEyCKedLjvvgxhDXcUtq21SqAh79j'\n  },\n  transaction_outcome: {\n    proof: [ [Object] ],\n    block_hash: 'J6cFDzAFkuknHMCEYW2uPQXDvCfSndkJmADVEWJbtTwV',\n    id: 'EgGzB73eFxCwZRGcEyCKedLjvvgxhDXcUtq21SqAh79j',\n    outcome: {\n      logs: [],\n      receipt_ids: [Array],\n      gas_burnt: 223182562500,\n      tokens_burnt: '22318256250000000000',\n      executor_id: 'sender.testnet',\n      status: [Object]\n    }\n  },\n  receipts_outcome: [\n    {\n      proof: [Array],\n      block_hash: 'FSS7UzTpMr4mUm6aw8MmzP6Q7wnQs35VS8vYm1R461dM',\n      id: '3LjBxe2jq1s7XEPrYxihp4rPVdyHAbYfkcdJjUEVijhJ',\n      outcome: [Object]\n    },\n    {\n      proof: [Array],\n      block_hash: '4XBio5dM5UGYjJgzZjgckfVgMZ9uKGbTkt8zZi5webxw',\n      id: 'AXFA4kwiYfruKQ4LkD1qZA8P7HoAvtFwGqwQYdWtWNaW',\n      outcome: [Object]\n    }\n  ]\n}\nTransaction Results:  {\n  signer_id: 'sender.testnet',\n  public_key: 'ed25519:8RazSLHvzj4TBSKGUo5appP7wVeqZNQYjP9hvhF4ZKS2',\n  nonce: 57,\n  receiver_id: 'receiver.testnet',\n  actions: [ { Transfer: [Object] } ],\n  signature: 'ed25519:2sK53w6hybSxX7qWShXz6xKnjnYRUW7Co3evEaaggNW6pGSCNPvx7urY4akwnzAbxZGwsKjx8dcVm73qbitntJjz',\n  hash: 'EgGzB73eFxCwZRGcEyCKedLjvvgxhDXcUtq21SqAh79j'\n}\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u0110\u1ec3 bi\u1ebft th\xeam th\xf4ng tin chi ti\u1ebft c\u1ee7a c\xe1c transaction receipt ",(0,s.jsx)(e.a,{href:"https://nomicon.io/RuntimeSpec/Receipts.html",children:"[b\u1ea5m v\xe0o \u0111\xe2y]"})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["To view the transaction in ",(0,s.jsx)(e.a,{href:"https://testnet.nearblocks.io/",children:"NearBlocks Explorer"}),", enter the ",(0,s.jsx)(e.code,{children:"hash"})," located under ",(0,s.jsx)(e.code,{children:"transaction"})," / ",(0,s.jsx)(e.code,{children:"Transaction Results"}),"."]}),"\n",(0,s.jsxs)(e.li,{children:["H\u01a1n n\u1eefa, b\u1ea1n c\xf3 th\u1ec3 t\u1ea1o m\u1ed9t link trong JS b\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng ",(0,s.jsx)(e.code,{children:"networkId"})," v\xe0 ",(0,s.jsx)(e.code,{children:"result.transaction.hash"}),"."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:'const prefix = (networkId === "testnet") ? "testnet." : "";\nconst transactionLink = `https://${prefix}nearblocks.io/txns/${result.transaction.hash}`;\n'})}),"\n",(0,s.jsx)(e.admonition,{title:"Got a question?",type:"tip",children:(0,s.jsx)("a",{href:"https://stackoverflow.com/questions/tagged/nearprotocol",children:(0,s.jsx)("h8",{children:"Ask it on StackOverflow!"})})}),"\n",(0,s.jsx)(e.p,{children:"Happy Coding! \ud83d\ude80"})]})}function h(n={}){const{wrapper:e}={...(0,t.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},11151:(n,e,c)=>{c.d(e,{Z:()=>a,a:()=>i});var s=c(67294);const t={},r=s.createContext(t);function i(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:i(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);