"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6993],{39334:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>d});var t=i(85893),r=i(11151),a=(i(74866),i(85162),i(42352));const l={id:"indexing",title:"Social Indexer"},s=void 0,o={id:"bos/api/indexing",title:"Social Indexer",description:"NEAR allows applications to index actions so they can be easily found later by other components.",source:"@site/i18n/vi/docusaurus-plugin-content-docs/current/bos/api/indexing.md",sourceDirName:"bos/api",slug:"/bos/api/indexing",permalink:"/vi/bos/api/indexing",draft:!1,unlisted:!1,editUrl:"https://github.com/near/docs/edit/master/website/../docs/bos/api/indexing.md",tags:[],version:"current",frontMatter:{id:"indexing",title:"Social Indexer"},sidebar:"integrate",previous:{title:"Overview",permalink:"/vi/bos/api/social"},next:{title:"Social Notifications",permalink:"/vi/bos/api/notifications"}},c={},d=[{value:"Indexing an Retrieving an Action",id:"indexing-an-retrieving-an-action",level:2},{value:"Simple Example",id:"simple-example",level:2},{value:"Like Example",id:"like-example",level:2},{value:"Indexing the Action",id:"indexing-the-action",level:5},{value:"Retrieving Indexing Action",id:"retrieving-indexing-action",level:5}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h5:"h5",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"NEAR allows applications to index actions so they can be easily found later by other components."}),"\n",(0,t.jsx)(n.p,{children:'For example, it is very useful to index all "comment" actions, so we can easily retrieve all the comments for a post.'}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"indexing-an-retrieving-an-action",children:"Indexing an Retrieving an Action"}),"\n",(0,t.jsxs)(n.p,{children:["In order to index an action we need to add the ",(0,t.jsx)(n.code,{children:"index"})," key to the data being saved, and set a ",(0,t.jsx)(n.code,{children:"key"})," and ",(0,t.jsx)(n.code,{children:"value"})," inside."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"key"})," will identify the indexed action within all ",(0,t.jsx)(n.code,{children:"action"})]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"value"})," is the value to be indexed."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"{\n  index: {\n    action: JSON.stringify({ key, value })\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Which can then be retrieved using using ",(0,t.jsx)(n.code,{children:"Social.index"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"Social.index( action, key, { limit: 10 } )\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["Adding a ",(0,t.jsx)(n.code,{children:"{ limit: 10 }"})," option to the ",(0,t.jsx)(n.code,{children:"index"})," is important, otherwise it does not return a result"]})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"simple-example",children:"Simple Example"}),"\n",(0,t.jsxs)(n.p,{children:["In this example, we simply index a ",(0,t.jsx)(n.code,{children:"readDocs"})," action, if you execute it in the ",(0,t.jsx)(n.a,{href:"https://near.org/sandbox",children:"NEAR Sandbox"})," your action will be added to the docs."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'Social.set({\n  index: {\n    readDocs: JSON.stringify({\n      key: "index docs",\n      value: context.accountId,\n    }),\n  },\n});\n'})}),"\n",(0,t.jsx)(n.p,{children:"If you execute the code correctly, your name will appear here:"}),"\n",(0,t.jsx)(a.W,{id:"1",height:"60px",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'return Social.index("readDocs", "index docs", {\n  limit: 10,\n});\n'})})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"like-example",children:"Like Example"}),"\n",(0,t.jsxs)(n.p,{children:["In this example, ",(0,t.jsx)(n.code,{children:"account.near"})," is liking a social post, and we are indexing this action so we can find it later."]}),"\n",(0,t.jsx)(n.h5,{id:"indexing-the-action",children:"Indexing the Action"}),"\n",(0,t.jsxs)(n.p,{children:["You can execute this code in the ",(0,t.jsx)(n.a,{href:"https://near.org/sandbox",children:"NEAR Sandbox"})," to add a like to ",(0,t.jsx)(n.a,{href:"https://near.org/near/widget/PostPage?accountId=mob.near&blockHeight=101496508",children:"this social post"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'const key = {\n  type: "social",\n  path: "mob.near/post/main",\n  blockHeight: 101496508,\n};\n\nSocial.set({\n  index: {\n    like: JSON.stringify({\n      key: key,\n      value: { type: "like" },\n    }),\n  },\n});\n'})}),"\n",(0,t.jsx)(n.h5,{id:"retrieving-indexing-action",children:"Retrieving Indexing Action"}),"\n",(0,t.jsx)(n.p,{children:"If you managed to execute the previous code, now you should have added a like to the post:"}),"\n",(0,t.jsx)(a.W,{id:"2",height:"190px",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'  const key = {\n    type: "social",\n    path: "mob.near/post/main",\n    blockHeight: 101496508\n  }\n\n  return Social.index(\n    "like",\n    key,\n    {\n      limit: 10,\n      order: "desc",\n      subscribe: true,\n    }\n  );\n'})})})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},85162:(e,n,i)=>{i.d(n,{Z:()=>l});i(67294);var t=i(36905);const r={tabItem:"tabItem_Ymn6"};var a=i(85893);function l(e){var n=e.children,i=e.hidden,l=e.className;return(0,a.jsx)("div",{role:"tabpanel",className:(0,t.Z)(r.tabItem,l),hidden:i,children:n})}},74866:(e,n,i)=>{i.d(n,{Z:()=>k});var t=i(67294),r=i(36905),a=i(12466),l=i(16550),s=i(20469),o=i(91980),c=i(67392),d=i(50012);function u(e){var n,i;return null!=(n=null==(i=t.Children.toArray(e).filter((function(e){return"\n"!==e})).map((function(e){if(!e||(0,t.isValidElement)(e)&&((n=e.props)&&"object"==typeof n&&"value"in n))return e;var n;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:i.filter(Boolean))?n:[]}function h(e){var n=e.values,i=e.children;return(0,t.useMemo)((function(){var e=null!=n?n:function(e){return u(e).map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes,default:n.default}}))}(i);return function(e){var n=(0,c.l)(e,(function(e,n){return e.value===n.value}));if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[n,i])}function p(e){var n=e.value;return e.tabValues.some((function(e){return e.value===n}))}function x(e){var n=e.queryString,i=void 0!==n&&n,r=e.groupId,a=(0,l.k6)(),s=function(e){var n=e.queryString,i=void 0!==n&&n,t=e.groupId;if("string"==typeof i)return i;if(!1===i)return null;if(!0===i&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=t?t:null}({queryString:i,groupId:r});return[(0,o._X)(s),(0,t.useCallback)((function(e){if(s){var n=new URLSearchParams(a.location.search);n.set(s,e),a.replace(Object.assign({},a.location,{search:n.toString()}))}}),[s,a])]}function v(e){var n,i,r,a,l=e.defaultValue,o=e.queryString,c=void 0!==o&&o,u=e.groupId,v=h(e),f=(0,t.useState)((function(){return function(e){var n,i=e.defaultValue,t=e.tabValues;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(i){if(!p({value:i,tabValues:t}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+i+'" but none of its children has the corresponding value. Available values are: '+t.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return i}var r=null!=(n=t.find((function(e){return e.default})))?n:t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:l,tabValues:v})})),g=f[0],m=f[1],b=x({queryString:c,groupId:u}),j=b[0],y=b[1],k=(n=function(e){return e?"docusaurus.tab."+e:null}({groupId:u}.groupId),i=(0,d.Nk)(n),r=i[0],a=i[1],[r,(0,t.useCallback)((function(e){n&&a.set(e)}),[n,a])]),w=k[0],I=k[1],N=function(){var e=null!=j?j:w;return p({value:e,tabValues:v})?e:null}();return(0,s.Z)((function(){N&&m(N)}),[N]),{selectedValue:g,selectValue:(0,t.useCallback)((function(e){if(!p({value:e,tabValues:v}))throw new Error("Can't select invalid tab value="+e);m(e),y(e),I(e)}),[y,I,v]),tabValues:v}}var f=i(72389);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var m=i(85893);function b(e){var n=e.className,i=e.block,t=e.selectedValue,l=e.selectValue,s=e.tabValues,o=[],c=(0,a.o5)().blockElementScrollPositionUntilNextRender,d=function(e){var n=e.currentTarget,i=o.indexOf(n),r=s[i].value;r!==t&&(c(n),l(r))},u=function(e){var n,i=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":var t,r=o.indexOf(e.currentTarget)+1;i=null!=(t=o[r])?t:o[0];break;case"ArrowLeft":var a,l=o.indexOf(e.currentTarget)-1;i=null!=(a=o[l])?a:o[o.length-1]}null==(n=i)||n.focus()};return(0,m.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":i},n),children:s.map((function(e){var n=e.value,i=e.label,a=e.attributes;return(0,m.jsx)("li",Object.assign({role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:function(e){return o.push(e)},onKeyDown:u,onClick:d},a,{className:(0,r.Z)("tabs__item",g.tabItem,null==a?void 0:a.className,{"tabs__item--active":t===n}),children:null!=i?i:n}),n)}))})}function j(e){var n=e.lazy,i=e.children,r=e.selectedValue,a=(Array.isArray(i)?i:[i]).filter(Boolean);if(n){var l=a.find((function(e){return e.props.value===r}));return l?(0,t.cloneElement)(l,{className:"margin-top--md"}):null}return(0,m.jsx)("div",{className:"margin-top--md",children:a.map((function(e,n){return(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==r})}))})}function y(e){var n=v(e);return(0,m.jsxs)("div",{className:(0,r.Z)("tabs-container",g.tabList),children:[(0,m.jsx)(b,Object.assign({},e,n)),(0,m.jsx)(j,Object.assign({},e,n))]})}function k(e){var n=(0,f.Z)();return(0,m.jsx)(y,Object.assign({},e,{children:u(e.children)}),String(n))}},42352:(e,n,i)=>{i.d(n,{W:()=>s});var t=i(67294),r=i(16729),a=i(91262),l=i(85893);function s(e){var n=e.children,s=e.id,o=void 0===s?1:s,c=e.height,d=void 0===c?"160px":c;return(0,l.jsx)(a.Z,{fallback:(0,l.jsx)("div",{children:" Loading... "}),children:function(){var e="";try{e=n.props.children.props.children}catch(g){}var a=i(58613),s=a.Widget,c=a.useInitNear,u=i(2302).ZP,h=(0,t.useState)(e),p=h[0],x=h[1],v=c().initNear,f=(0,r.O)().selector;return(0,t.useEffect)((function(){v&&f&&v({networkId:"mainnet",selector:f})}),[v,f]),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{class:"monaco",children:(0,l.jsx)(u,{height:d,value:p,options:{minimap:{enabled:!1},wordWrap:"on",scrollBeyondLastLine:!1,fontSize:"14px",renderLineHighlight:!1,hideMargin:!0,glyphMargin:!1,folding:!1,lineNumbers:!1,lineDecorationsWidth:0,lineNumbersMinChars:0,scrollBars:!1},onChange:function(e,n){return x(e)}})}),(0,l.jsxs)("div",{class:"code_iframe",children:[(0,l.jsxs)("h4",{style:{fontWeight:0},children:[" Preview ",(0,l.jsx)("small",{children:" - Edit the code above! "})," "]}),(0,l.jsx)("hr",{class:"preview-border"}),(0,l.jsx)("div",{class:"bootstrap-scope",children:(0,l.jsx)("div",{class:"vm-widget",children:(0,l.jsx)(s,{code:p},o)})})]})]})}})}}}]);