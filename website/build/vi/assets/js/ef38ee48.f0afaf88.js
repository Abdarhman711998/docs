"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8142],{41543:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var s=t(85893),o=t(11151);const i={id:"basics",title:"Basic Instructions"},r="Basic instructions",c={id:"sdk/rust/building/basics",title:"Basic Instructions",description:"To compile release version of the smart contract you can run:",source:"@site/i18n/vi/docusaurus-plugin-content-docs/current/sdk/rust/building/basic-build.md",sourceDirName:"sdk/rust/building",slug:"/sdk/rust/building/basics",permalink:"/vi/sdk/rust/building/basics",draft:!1,unlisted:!1,editUrl:"https://github.com/near/docs/edit/master/website/../docs/sdk/rust/building/basic-build.md",tags:[],version:"current",frontMatter:{id:"basics",title:"Basic Instructions"},sidebar:"tools",previous:{title:"Deploying Contract",permalink:"/vi/sdk/rust/promises/deploy-contract"},next:{title:"Rapid Prototyping",permalink:"/vi/sdk/rust/building/prototyping"}},a={},l=[];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"basic-instructions",children:"Basic instructions"}),"\n",(0,s.jsx)(n.p,{children:"To compile release version of the smart contract you can run:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cargo build --target wasm32-unknown-unknown --release\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["The above ",(0,s.jsx)(n.code,{children:"build"})," command is setting a ",(0,s.jsx)(n.code,{children:"target"})," flag to create a WebAssembly ",(0,s.jsx)(n.code,{children:".wasm"})," file."]})}),"\n",(0,s.jsx)(n.p,{children:"L\u01b0u \xfd r\u1eb1ng th\u01b0 m\u1ee5c project c\u1ee7a b\u1ea1n b\xe2y gi\u1edd c\xf3 m\u1ed9t s\u1ed1 m\u1ee5c b\u1ed5 sung nh\u01b0 sau:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:".\n\u251c\u2500\u2500 Cargo.lock  \u27f5 \u0111\u01b0\u1ee3c t\u1ea1o trong qu\xe1 tr\xecnh build \u0111\u1ec3 kh\xf3a c\xe1c dependency\n\u251c\u2500\u2500 Cargo.toml\n\u251c\u2500\u2500 src\n\u2502  \u2514\u2500\u2500 lib.rs\n\u2514\u2500\u2500 target      \u27f5 \u0111\u01b0\u1ee3c t\u1ea1o trong qu\xe1 tr\xecnh build, l\u01b0u wasm \u0111\xe3 bi\xean d\u1ecbch\n"})}),"\n",(0,s.jsx)(n.h1,{id:"build-and-flags",children:"Build and Flags"}),"\n",(0,s.jsx)(n.p,{children:"We recommend you to optimize your build artifact with the use of the next flags in your Cargo.toml file. If you are performing a multi-contract build, you should include these settings in the Cargo.toml that is at the root of your project."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'[profile.release]\ncodegen-units = 1\n# Tell `rustc` to optimize for small code size.\nopt-level = "z"\nlto = true\ndebug = false\npanic = "abort"\n# Opt into extra safety checks on arithmetic operations https://stackoverflow.com/a/64136471/249801\noverflow-checks = true\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The above command is essentially setting special flags and optimizing the resulting ",(0,s.jsx)(n.code,{children:".wasm"})," file. At the end of the day, this allows you to customize the ",(0,s.jsx)(n.code,{children:"cargo build --release"})," command."]}),"\n",(0,s.jsx)(n.h1,{id:"custom-flags",children:"Custom Flags"}),"\n",(0,s.jsxs)(n.p,{children:["If you wish to add custom flags to your build, you can perform this by adding build flags to your ",(0,s.jsx)(n.code,{children:"ProjectFolder/.cargo/config.toml"})," as illustrated in this example."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[target.wasm32-unknown-unknown]\nrustflags = ["-C", "link-arg=-s"]\n'})}),"\n",(0,s.jsxs)(n.p,{children:["A full set of build options can be accessed at ",(0,s.jsx)(n.a,{href:"https://doc.rust-lang.org/cargo/reference/config.html",children:"https://doc.rust-lang.org/cargo/reference/config.html"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["You can find an example ",(0,s.jsx)(n.a,{href:"https://github.com/near/near-sdk-rs/blob/05e4539a8f3db86dd43b768ee9660dd4c8e7ea5c/examples/fungible-token/.cargo/config.toml",children:"here"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>c,a:()=>r});var s=t(67294);const o={},i=s.createContext(o);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);