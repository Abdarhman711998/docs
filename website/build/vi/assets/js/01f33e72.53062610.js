"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7424],{7649:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>l});var n=o(85893),s=o(11151);const a={id:"storage",title:"Million Small Deposits"},r=void 0,i={id:"develop/contracts/security/storage",title:"Million Small Deposits",description:"On NEAR, your contract pays for the storage it uses. This means that the more data you store, the more balance you need to cover for storage. If you don't handle these costs correctly (e.g. asking the user to cover their storage usage), then a million little deposits can drain your contract of its funds.",source:"@site/i18n/vi/docusaurus-plugin-content-docs/current/2.develop/contracts/security/storage.md",sourceDirName:"2.develop/contracts/security",slug:"/develop/contracts/security/storage",permalink:"/vi/develop/contracts/security/storage",draft:!1,unlisted:!1,editUrl:"https://github.com/near/docs/edit/master/website/../docs/2.develop/contracts/security/storage.md",tags:[],version:"current",lastUpdatedBy:"Github Actions",lastUpdatedAt:1704996595,formattedLastUpdatedAt:"11 thg 1, 2024",frontMatter:{id:"storage",title:"Million Small Deposits"},sidebar:"contracts",previous:{title:"\u2705 Checklist",permalink:"/vi/develop/contracts/security/checklist"},next:{title:"Cross-Contract Calls",permalink:"/vi/develop/contracts/security/callbacks"}},c={},l=[];function d(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",strong:"strong",...(0,s.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"On NEAR, your contract pays for the storage it uses. This means that the more data you store, the more balance you need to cover for storage. If you don't handle these costs correctly (e.g. asking the user to cover their storage usage), then a million little deposits can drain your contract of its funds."}),"\n",(0,n.jsx)(t.p,{children:"Ch\xfang ta h\xe3y c\xf9ng xem qua m\u1ed9t v\xed d\u1ee5 sau:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["You launch ",(0,n.jsx)(t.a,{href:"https://examples.near.org/guest-book-js",children:"a guest book app"}),", deploying your app's smart contract to the account ",(0,n.jsx)(t.code,{children:"example.near"})]}),"\n",(0,n.jsxs)(t.li,{children:["Nh\u1eefng ng\u01b0\u1eddi d\xf9ng \u1ee9ng d\u1ee5ng c\u1ee7a b\u1ea1n c\xf3 th\u1ec3 th\xeam tin nh\u1eafn c\u1ee7a h\u1ecd v\xe0o guest book. This means your users will pay a small gas fee to ",(0,n.jsx)(t.strong,{children:"store"})," their message to your contract."]}),"\n",(0,n.jsxs)(t.li,{children:["When a new message comes in, NEAR will check if ",(0,n.jsx)(t.code,{children:"example.near"})," has enough balance to cover the new storage needs. N\u1ebfu n\xf3 kh\xf4ng \u0111\u1ee7, transaction s\u1ebd th\u1ea5t b\u1ea1i."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"L\u01b0u \xfd r\u1eb1ng \u0111i\u1ec1u n\xe0y c\xf3 th\u1ec3 t\u1ea1o m\u1ed9t attack surface. If sending data to your guest book is inexpensive to the user while costing the contract owner significantly more, a malicious user can exploit the imbalance to make maintaining the contract prohibitively expensive."}),"\n",(0,n.jsx)(t.p,{children:"One possible way to tackle this problem is asking the user to attach money to the call to cover the storage used by their message."}),"\n",(0,n.jsx)(t.admonition,{type:"tip",children:(0,n.jsxs)(t.mdxAdmonitionTitle,{children:["Remember that you can release the ",(0,n.jsx)(t.em,{children:"balance locked for storage"})," by simply deleting data from the contract. :::"]})})]})}function u(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},11151:(e,t,o)=>{o.d(t,{Z:()=>i,a:()=>r});var n=o(67294);const s={},a=n.createContext(s);function r(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);