<!doctype html>
<html lang="vi" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-concepts/storage/storage-staking" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Storage Staking | NEAR Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.near.org/vi/img/near_logo.svg"><meta data-rh="true" name="twitter:image" content="https://docs.near.org/vi/img/near_logo.svg"><meta data-rh="true" property="og:url" content="https://docs.near.org/vi/concepts/storage/storage-staking"><meta data-rh="true" property="og:locale" content="vi"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" property="og:locale:alternate" content="ko"><meta data-rh="true" property="og:locale:alternate" content="zh_CN"><meta data-rh="true" name="docusaurus_locale" content="vi"><meta data-rh="true" name="docsearch:language" content="vi"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Storage Staking | NEAR Documentation"><meta data-rh="true" name="description" content="Khi bạn deploy một smart contract trên NEAR, bạn cần trả cho chi phí lưu trữ mà smart contract này yêu cầu thông qua một cơ chế gọi là storage staking."><meta data-rh="true" property="og:description" content="Khi bạn deploy một smart contract trên NEAR, bạn cần trả cho chi phí lưu trữ mà smart contract này yêu cầu thông qua một cơ chế gọi là storage staking."><link data-rh="true" rel="icon" href="/vi/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.near.org/vi/concepts/storage/storage-staking"><link data-rh="true" rel="alternate" href="https://docs.near.org/concepts/storage/storage-staking" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.near.org/ko/concepts/storage/storage-staking" hreflang="ko"><link data-rh="true" rel="alternate" href="https://docs.near.org/vi/concepts/storage/storage-staking" hreflang="vi"><link data-rh="true" rel="alternate" href="https://docs.near.org/zh-CN/concepts/storage/storage-staking" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://docs.near.org/concepts/storage/storage-staking" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://0LUM67N2P2-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-100373569-7","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>


<link rel="search" type="application/opensearchdescription+xml" title="NEAR Documentation" href="/vi/opensearch.xml">







<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;900&family=Source+Code+Pro:ital,wght@0,400;0,600;1,400;1,600&display=swap">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://use.fontawesome.com/221fd444f5.js"></script><link rel="stylesheet" href="/vi/assets/css/styles.4ebfac86.css">
<script src="/vi/assets/js/runtime~main.e6106da7.js" defer="defer"></script>
<script src="/vi/assets/js/main.a5e14bd4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Nhảy tới nội dung"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Nhảy tới nội dung</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/vi/"><div class="navbar__logo"><img src="/vi/img/near_logo.svg" alt="NEAR Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/vi/img/near_logo_white.svg" alt="NEAR Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/vi/concepts/welcome">Learn</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Build</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/vi/develop/contracts/welcome">Smart Contracts</a></li><li><a class="dropdown__link" href="/vi/develop/integrate/welcome">Web3 Applications</a></li><li><a class="dropdown__link" href="/vi/develop/monitor">Data Solutions</a></li><li><hr> <small class="subtitle"> Integrations </small></li><li><a class="dropdown__link" href="/vi/develop/integrate/backend-login">Backend</a></li><li><a class="dropdown__link" href="/vi/develop/integrate/frontend">Frontend</a></li><li><a class="dropdown__link" href="/vi/integrator/exchange-integration">Exchanges</a></li><li><a class="dropdown__link" href="/vi/data-availability/welcome">Rollups DA</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Primitives</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/vi/primitives/linkdrop/introduction">Drops</a></li><li><a class="dropdown__link" href="/vi/primitives/ft/introduction">Fungible Tokens</a></li><li><a class="dropdown__link" href="/vi/primitives/nft/introduction">Non-Fungible Tokens</a></li><li><a class="dropdown__link" href="/vi/primitives/dex/introduction">Decentralized Exchanges</a></li><li><a class="dropdown__link" href="/vi/primitives/dao/introduction">Autonomous Organizations</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Tools</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/vi/tools/welcome">🧰 All Tools</a></li><li><hr> <small class="subtitle"> Essentials </small></li><li><a class="dropdown__link" href="/vi/tools/near-api-js/quick-reference">NEAR API</a></li><li><a class="dropdown__link" href="/vi/sdk/welcome">NEAR SDK</a></li><li><a class="dropdown__link" href="/vi/tools/near-cli">NEAR CLI</a></li><li><hr> <small class="subtitle"> Onboarding </small></li><li><a class="dropdown__link" href="/vi/tools/wallet-selector">Wallet Selector</a></li><li><a class="dropdown__link" href="/vi/tools/fastauth-sdk">FastAuth (Email Login)</a></li><li><a class="dropdown__link" href="/vi/develop/relayers/build-relayer">Relayers</a></li><li><hr> <small class="subtitle"> IDEs </small></li><li><a class="dropdown__link" href="/vi/bos/dev/vscode">VSCode Extension </a></li><li><a href="https://jutsu.ai/editor" target="_blank" rel="noopener noreferrer" class="dropdown__link">BOS Web IDE (Jutsu)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://docs.welldonestudio.io/code/getting-started" target="_blank" rel="noopener noreferrer" class="dropdown__link">Remix IDE Plugin<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a class="navbar__item navbar__link" href="/vi/api/rpc/introduction">RPC</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Other Docs</a><ul class="dropdown__menu"><li><a href="https://nomicon.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">Protocol Docs<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://near-nodes.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">Validator Docs<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Tìm kiếm"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Tìm kiếm</span></span><span class="DocSearch-Button-Keys"></span></button></div><a class="navbar__item navbar__link" href="/vi/blog">Changelog 🎉</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Tiếng Việt</a><ul class="dropdown__menu"><li><a href="/concepts/storage/storage-staking" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/ko/concepts/storage/storage-staking" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko">한국어</a></li><li><a href="/vi/concepts/storage/storage-staking" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="vi">Tiếng Việt</a></li><li><a href="/zh-CN/concepts/storage/storage-staking" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">简体中文</a></li></ul></div><button class="navbar__item navbar__link btn_jI7_"> <!-- -->Loading...<!-- --> </button><a class="navbar__item navbar__link header-github-link" aria-label="GitHub repository" href="/vi/develop/github-overview"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Chuyển đổi chế độ sáng và tối (hiện tại chế độ sáng)" aria-label="Chuyển đổi chế độ sáng và tối (hiện tại chế độ sáng)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/vi/"><div class="navbar__logo"><img src="/vi/img/near_logo.svg" alt="NEAR Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/vi/img/near_logo_white.svg" alt="NEAR Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><div class="toggle_vylO margin-right--md"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Chuyển đổi chế độ sáng và tối (hiện tại chế độ sáng)" aria-label="Chuyển đổi chế độ sáng và tối (hiện tại chế độ sáng)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><button type="button" aria-label="Close navigation bar" class="clean-btn navbar-sidebar__close"><svg viewBox="0 0 15 15" width="21" height="21"><g stroke="var(--ifm-color-emphasis-600)" stroke-width="1.2"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><div class="navbar-sidebar__items"><div class="navbar-sidebar__item menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/vi/concepts/welcome">Learn</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_S0Fm menu__link menu__link--sublist menu__link--sublist-caret">Build</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_S0Fm menu__link menu__link--sublist menu__link--sublist-caret">Primitives</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_S0Fm menu__link menu__link--sublist menu__link--sublist-caret">Tools</a></li><li class="menu__list-item"><a class="menu__link" href="/vi/api/rpc/introduction">RPC</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_S0Fm menu__link menu__link--sublist menu__link--sublist-caret">Other Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/vi/blog">Changelog 🎉</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_S0Fm menu__link menu__link--sublist menu__link--sublist-caret"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Ngôn ngữ</a></li><li class="menu__list-item"><button class="menu__link btn_jI7_"> <!-- -->Loading...<!-- --> </button></li><li class="menu__list-item"><a class="menu__link header-github-link" aria-label="GitHub repository" href="/vi/develop/github-overview"></a></li></ul></div><div class="navbar-sidebar__item menu"><button type="button" class="clean-btn navbar-sidebar__back">← Trở lại menu chính</button></div></div></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Trở lại đầu trang" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/vi/concepts/welcome">Home</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/vi/concepts/basics/protocol">⭐ What is NEAR?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="menu__link"><b><small> The NEAR Protocol </small></b></span></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/vi/concepts/basics/accounts/model">Accounts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/vi/concepts/basics/transactions/overview">Transactions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/vi/concepts/data-flow/near-data-flow">Data Flow</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/vi/concepts/basics/tokens">Tokens</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/vi/concepts/storage/data-storage">Storage</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/vi/concepts/storage/data-storage">Storage trên NEAR</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/vi/concepts/storage/storage-staking">Storage Staking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/vi/concepts/storage/storage-solutions">Các giải pháp thay thế</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/vi/concepts/basics/validators">Các Validator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/vi/concepts/basics/networks">Networks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/vi/concepts/basics/epoch">Epoch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="menu__link"><b><small> Blockchain Data &amp; Indexing </small></b></span></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/vi/concepts/data-flow/data-storage">Data on the Blockchain</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/vi/concepts/advanced/indexers">Data Indexing</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="menu__link"><b><small> Advanced Topics </small></b></span></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/vi/concepts/basics/runtime">Các video về Core Runtime</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/vi/concepts/advanced/specification">Đặc điểm kỹ thuật</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/vi/concepts/advanced/papers">Các paper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="menu__link"><b><small> From Web 2 to Web 3 </small></b></span></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/vi/concepts/web3/intro">Giới thiệu</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/vi/concepts/web3/basics">Blockchain basics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/vi/concepts/web3/near">NEAR Protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/vi/concepts/web3/economics">Economics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/vi/concepts/web3/nfts">NFTs for Web 2.0 Apps</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Trang chủ" class="breadcrumbs__link" href="/vi/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Storage</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Storage Staking</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Trên trang này</button></div><div class="theme-doc-markdown markdown"><header><h1>Storage Staking</h1></header><blockquote>
<p>Khi bạn deploy một smart contract trên NEAR, bạn cần trả cho chi phí lưu trữ mà smart contract này yêu cầu thông qua một cơ chế gọi là storage staking.</p>
<p>Trong storage staking (đôi khi được gọi là <em>state</em> staking), tài khoản sở hữu smart contract phải stake (hoặc lock) một lượng token tương ứng với lượng dữ liệu được lưu trữ trên smart contract đó, tương ứng với việc khấu trừ một khoản từ account sở hữu contract.</p>
</blockquote>
<blockquote class="info"><strong>Bạn đã biết về Ethereum?</strong><br><br><p>Nếu bạn quen thuộc với pricing model của Ethereum, thì bạn cũng biết rằng, giống như NEAR, nó cũng thu một khoản phí (gọi là &quot;gas&quot;) cho mỗi transaction. Khác với NEAR, phí gas của Ethereum đại diện cho lượng dữ liệu được lưu trữ thông qua transaction đó. Điều này về cơ bản có nghĩa là bất kì ai đều có thể chi trả một lần cho việc lưu trữ dữ liệu vĩnh viễn on-chain. Đây là một economic design không tốt với hai nguyên nhân chính sau: 1. Những người sử dụng network (miner, trong trường hợp của Etherum 1) không được khuyến khích lưu trữ một lượng lớn dữ liệu một cách thích hợp, vì phí gas được trả trong quá khứ có thể làm tăng chi phí lữu trữ mãi mãi, và 2. Những người dùng của smart contract bị thu phí cho lượng dữ liệu mà họ gửi để lưu trữ trong nó, thay vì thu phí của người sỡ hữu smart contract.</p></blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-does-nears-design-align-incentives">How does NEAR&#x27;s design align incentives?<a href="#how-does-nears-design-align-incentives" class="hash-link" aria-label="Đường dẫn trực tiếp tới How does NEAR&#x27;s design align incentives?" title="Đường dẫn trực tiếp tới How does NEAR&#x27;s design align incentives?">​</a></h2>
<p>Những token được dùng trong storage staking không thể sử dụng cho các việc khác, như là validation staking. Điều này làm tăng lợi nhuận mà những validator nhận được. Tìm hiểu thêm tại <a href="https://near.org/papers/economics-in-sharded-blockchain/" target="_blank" rel="noopener noreferrer">economics whitepaper</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="when-do-tokens-get-staked">When do tokens get staked?<a href="#when-do-tokens-get-staked" class="hash-link" aria-label="Đường dẫn trực tiếp tới When do tokens get staked?" title="Đường dẫn trực tiếp tới When do tokens get staked?">​</a></h2>
<p>Khi mỗi transaction chuẩn bị xử lý thêm dữ liệu.</p>
<p>Chúng ta hãy cùng xem qua một ví dụ sau:</p>
<ol>
<li>Bạn chạy <a href="https://examples.near.org/guest-book" target="_blank" rel="noopener noreferrer">ứng dụng guest book</a>, deploy smart contract của ứng dụng bằng tài khoản <code>example.near</code></li>
<li>Những người dùng ứng dụng của bạn có thể thêm tin nhắn của họ vào guest book. Điều này nghĩa là người dùng của bạn sẽ, <a href="/vi/concepts/basics/transactions/gas#what-about-prepaid-gas">mặc định</a>, trả một khoản phí gas nhỏ để gửi tin nhắn của họ vào contract của bạn.</li>
<li>Khi có một call xảy ra, NEAR sẽ kiểm tra số dư của account <code>example.near</code> có đủ số dư dể stake một lượng token nhằm đảm bảo cho các nhu cầu lưu trữ phát sinh hay không. Nếu nó không đủ, transaction sẽ thất bại.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-million-cheap-data-additions-attack">The &quot;million cheap data additions&quot; attack<a href="#the-million-cheap-data-additions-attack" class="hash-link" aria-label="Đường dẫn trực tiếp tới The &quot;million cheap data additions&quot; attack" title="Đường dẫn trực tiếp tới The &quot;million cheap data additions&quot; attack">​</a></h2>
<p>Lưu ý rằng điều này có thể tạo một attack surface. Tiếp tục với ví dụ ở trên, nếu gửi dữ liệu tới ứng dụng guest book của bạn mà người dùng chỉ trả một khoản không đáng kể, trong khi chi phí của người sở hữu contract tăng lên đáng kể, từ đó một người dùng xấu có thể lợi dụng việc mất cân bằng này để làm cho việc bảo trì contract trở nên cực kì đắt đỏ.</p>
<p>Vì vậy, hãy cẩn thận khi thiết kế smart contract của bạn để đảm bảo rằng những phương thức tấn công này sẽ tiêu tốn chi phí của những kẻ tấn công tiềm ẩn nhiều hơn bình thường.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="btw-you-can-remove-data-to-unstake-some-tokens">btw, you can remove data to unstake some tokens<a href="#btw-you-can-remove-data-to-unstake-some-tokens" class="hash-link" aria-label="Đường dẫn trực tiếp tới btw, you can remove data to unstake some tokens" title="Đường dẫn trực tiếp tới btw, you can remove data to unstake some tokens">​</a></h2>
<p>Những người quen thuộc với &quot;immutable data&quot; trong blockchain sẽ thấy điều này đáng ngạc nhiên. Trong khi đó sự thật là một <em>indexing node</em> sẽ giữ tất cả dữ liệu mãi mãi, <em>các validating node</em> (là những node được chạy bởi hầu hết validator trong mạng lưới) thì không. Các smart contract có thể cung cấp nhiều cách để xóa dữ liệu, và dữ liệu này sẽ bị loại bỏ ra khỏi hầu hết các node trên network trong một vài <a href="/vi/concepts/basics/epoch">epoch</a>.</p>
<p>Lưu ý rằng một call tới smart contract của bạn để xóa dữ liệu cần có một khoản phí gas tương ứng. Với giới hạn gas của NEAR, điều này tạo ra một cận trên về việc bao nhiêu dữ liệu có thể bị xóa trong mỗi một transaction.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-much-does-it-cost">How much does it cost?<a href="#how-much-does-it-cost" class="hash-link" aria-label="Đường dẫn trực tiếp tới How much does it cost?" title="Đường dẫn trực tiếp tới How much does it cost?">​</a></h2>
<p>Storage staking được định giá bằng một số cụ thể bởi network, cụ thể được đặt là <strong>1E19 yoctoNEAR mỗi byte</strong>, hay <strong>100kb mỗi NEAR token (Ⓝ)</strong>. <sup><a href="#user-content-fn-1" id="user-content-fnref-1" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup> <sup><a href="#user-content-fn-2" id="user-content-fnref-2" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup></p>
<p>JSON RPC API của NEAR cung cấp <a href="/vi/docs/api/rpc#genesis-config">một cách để truy vấn initial setting này</a> cũng như <a href="/vi/docs/api/rpc#protocol-config">một cách để truy vấn live config / những block gần nhất</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-cost-breakdown">Example cost breakdown<a href="#example-cost-breakdown" class="hash-link" aria-label="Đường dẫn trực tiếp tới Example cost breakdown" title="Đường dẫn trực tiếp tới Example cost breakdown">​</a></h2>
<p>Hãy cùng xem xét một ví dụ sau.</p>
<p>Một <a href="https://github.com/near/NEPs/pull/4" target="_blank" rel="noopener noreferrer">non-fungible token</a> là duy nhất, điều này có nghĩa m ỗi token đều có ID riêng của nó. Contract phải lưu trữ một mapping từ những token ID đến account ID của người sở hữu.</p>
<p>Nếu một NFT được dùng để track <strong>1 triệu</strong> token, cần yêu cầu bao nhiêu chi phí lưu trữ cho ánh xạ token-ID-tới-người-sở hữu? Và cần bao nhiêu token để stake cho chi phí lưu trữ đó?</p>
<p>Let&#x27;s calculate the storage needs when using a <code>PersistentMap</code> that stores data as UTF-8 strings.</p>
<p>Đây là <code>PersistentMap</code> của chúng ta:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">AccountId</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">TokenId</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> u64</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> tokenToOwner </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">PersistentMap</span><span class="token class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">TokenId</span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token class-name" style="color:rgb(255, 203, 107)"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">AccountId</span><span class="token class-name operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;t2o&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Sao chép code vào bộ nhớ tạm" title="Sao chép" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Cụ thể hơn, tất cả dữ liệu lưu trữ trên NEAR blockchain được lưu trong một key-value database. Biến <code>&#x27;t2o&#x27;</code> được truyền vào <code>PersistentMap</code> giúp nó truy vết được tất cả dữ liệu của nó. Tại thời điểm viết bài, nếu tài khoản <code>example.near</code> của bạn sở hữu token với ID là <code>0</code>, thì đây là dữ liệu sẽ được lưu vào key-value database:</p>
<ul>
<li>key: <code>t2o::0</code></li>
<li>value: <code>example.near</code></li>
</ul>
<p>Như vậy với 1 triệu token, tất cả những gì chúng ta cần phải làm là cộng vào và nhân với 1 triệu:</p>
<ol>
<li>Prefix <code>t2o</code>, sẽ được serialize thành ba byte ở dạng UTF-8, và hai dấu hai chấm sẽ thêm vào hai byte nữa. Tổng cộng là 5 byte.</li>
<li>Với một implementation mà <code>TokenId</code> tăng tự động, những giá trị sẽ nằm trong khoảng từ <code>0</code> đến <code>999999</code>, lúc này độ dài trung bình sẽ là 5 byte.</li>
<li>Giả sử chúng ta có những NEAR <code>AccountId</code> ở dạng chuẩn, và dự đoán những NEAR Account ID này sẽ theo pattern gần đúng của những domain name, mà <a href="https://www.gaebler.com/Domain-Length-Research.htm" target="_blank" rel="noopener noreferrer">độ dài trung bình khoảng 10 kí tự</a>, cộng thêm một top-level name dạng <code>.near</code>. Do đó, độ dài trung bình chấp nhận được vào khoảng 15 kí tự; chúng ta hãy giữ dự đoán này, và nếu tệ hơn hãy tăng lên 25 kí tự. Điều này sẽ tương ứng với 25 byte, vì các NEAR account ID phải sử dụng những kí tự trong bộ mã ASCII.</li>
</ol>
<p>Do đó:</p>
<p>1_000_000 * (5 + 5 + 25)</p>
<p>35 triệu byte. 350 lần của 100Kib, tương đương Ⓝ350. Tính toán chính xác như sau: Nhân 1e19 yoctoNEAR với mỗi byte, chúng ta tìm ra rằng mapping <code>tokenToOwner</code> với 35 triệu byte sẽ yêu cầu stake 3.5e26 yoctoNEAR, hay Ⓝ350</p>
<p>Lưu ý rằng bạn có th  ể giảm con số này xuống Ⓝ330 chỉ bằng việc thay đổi prefix từ <code>t2o</code> thành một kí tự. Hoặc bỏ qua toàn bộ! Bạn có thể có zero-length prefix trên một <code>PersistentVector</code> trong smart contract. Nếu bạn làm như vậy, bạn có thể giảm con số này xuống còn Ⓝ250.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="calculate-costs-for-your-own-contract">Calculate costs for your own contract<a href="#calculate-costs-for-your-own-contract" class="hash-link" aria-label="Đường dẫn trực tiếp tới Calculate costs for your own contract" title="Đường dẫn trực tiếp tới Calculate costs for your own contract">​</a></h2>
<p>Tự tính toán số byte như ở trên sẽ khó và dễ xảy ra lỗi. Tin vui là: bạn không cần phải tính!</p>
<p>Bạn có thể kiểm tra chi phí lưu trữ được dùng ở ngay bên trong những unit test của bạn:</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-ways-to-keep-costs-down">Other ways to keep costs down<a href="#other-ways-to-keep-costs-down" class="hash-link" aria-label="Đường dẫn trực tiếp tới Other ways to keep costs down" title="Đường dẫn trực tiếp tới Other ways to keep costs down">​</a></h2>
<p>Lưu trữ dữ liệu on-chain không rẻ đối với những người sử dụng network, và NEAR đẩy chi phí này cho những developer. Vì thế, nếu bạn là một developer thì bạn sẽ giảm chi phí như thế nào? Có hai phương pháp tiếp cận phổ biến:</p>
<ol>
<li>Sử dụng một binary serialization format, thay cho JSON</li>
<li>Lưu dữ liệu off-chain</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-a-binary-serialization-format-rather-than-json">Use a binary serialization format, rather than JSON<a href="#use-a-binary-serialization-format-rather-than-json" class="hash-link" aria-label="Đường dẫn trực tiếp tới Use a binary serialization format, rather than JSON" title="Đường dẫn trực tiếp tới Use a binary serialization format, rather than JSON">​</a></h3>
<p>NEAR core team maintain một library gọi là <a href="https://borsh.io/" target="_blank" rel="noopener noreferrer">borsh</a>, nó được dùng một cách tự động khi bạn dùng <code>near-sdk-rs</code>. Someday, it will probably also be used by <code>near-sdk-js</code>.</p>
<p>Tưởng tượng rằng bạn muốn lưu một array dạng <code>[0, 1, 2, 3]</code>. Bạn có thể serialize nó ở dạng string hoặc lưu nó ở dạng UTF-8 byte. This is what <code>near-sdk-js</code> does today. Loại bỏ các space, cuối cùng bạn chỉ sử dụng 9 byte.</p>
<p>Using borsh, this same array gets saved as 8 bytes:</p>
<p>\u0004\u0000\u0000\u0000\u0000\u0001\u0002\u0003</p>
<p>Thoạt nhìn, tiết kiệm 1 byte có lẽ không quan trọng lắm. Nhưng hãy nhìn kĩ hơn.</p>
<p>Bốn byte đầu tiên, <code>\u0004\u0000\u0000\u0000</code>, báo hiệu cho serializer đây là một array kiểu <code>u32</code> với chiều dài <code>4</code> đang sử dụng little-endian encoding. Những byte còn lại là các phần tử của mảng - <code>\u0000\u0001\u0002\u0003</code>. Khi bạn serialize thêm nhiều phần tử, mỗi lần sẽ thêm một byte vào cấu trúc dữ liệu này. Với JSON, mỗi phần tử mới yêu cầu thêm hai byte, để biểu diễn cả dấu phẩy và số mới này.</p>
<p>Nhìn chung, Borsh nhanh hơn, tốn ít chi phí bộ nhớ, và chi phí gas hơn. Hãy dùng nó nếu bạn có thể.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="store-data-off-chain">Store data off-chain<a href="#store-data-off-chain" class="hash-link" aria-label="Đường dẫn trực tiếp tới Store data off-chain" title="Đường dẫn trực tiếp tới Store data off-chain">​</a></h3>
<p>This is especially important if you are storing user-generated data!</p>
<p>Hãy sử dụng <a href="https://github.com/near-examples/guest-book" target="_blank" rel="noopener noreferrer">Guest Book</a> này để làm ví dụ. Hiện tại, những người dùng ứng dụng có thể đăng nhập với NEAR và để lại một tin nhắn. Tin nhắn của họ được lưu on-chain.</p>
<p>Thử nghĩ rằng ứng dụng này rất phổ biến, và những người dùng đó bắt đầu vô tình để lại rất nhiều những tin nhắn dài. Người sở hữu contract có lẽ sẽ rất nhanh hết tiền để trả chi phí lưu trữ!</p>
<p>Chiến lược tốt hơn có thể là lưu trữ dữ liệu off-chain. Nếu bạn muốn giữ ứng dụng phân tán, thì giải pháp lưu trữ dữ liệu off-chain phổ biến là <a href="https://ipfs.io/" target="_blank" rel="noopener noreferrer">IPFS</a>. Với nó, bạn có thể biểu diễn bất kì tập hợp dữ liệu nào với một predictable content address được biểu diễn dưới dạng sau:</p>
<p>QmYwAPJzv5CZsnA625s3Xf2nemtYgPpHdWEz79ojWnPbdG</p>
<p>Với một content address có thể biểu diễn một cấu trúc JSON hay một tấm hình hay bất kì kiểu dữ liệu nào. Dữ liệu này được lưu trữ vật lý ở đâu? Bạn có thể sử dụng <a href="https://filecoin.io/" target="_blank" rel="noopener noreferrer">Filecoin</a> hoặc chạy IPFS server của riêng bạn để liên kết dữ liệu của ứng dụng.</p>
<p>With this approach, each record you add to your contract will be a predictable size.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Đường dẫn trực tiếp tới Summary" title="Đường dẫn trực tiếp tới Summary">​</a></h2>
<p>Cấu trúc của NEAR cải tiến các hoạt động của network trong khi đó vẫn hỗ trợ flexibility và predictability cho các contract developer. Quản lý chi phí lưu trữ là một khía cạnh quan trọng của smart contract design, và các library của NEAR khiến nó trở nên dễ dàng để nhận ra bao nhiêu chi phí lưu trữ là đủ cho ứng dụng của bạn.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Got a question?</div><div class="admonitionContent_BuS1"><a href="https://stackoverflow.com/questions/tagged/nearprotocol"><h8>Ask it on StackOverflow!</h8></a></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="footnotes">Footnotes<a href="#footnotes" class="hash-link" aria-label="Đường dẫn trực tiếp tới Footnotes" title="Đường dẫn trực tiếp tới Footnotes">​</a></h2>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_LWe7 sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Đường dẫn trực tiếp tới Footnotes" title="Đường dẫn trực tiếp tới Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-1">
<p><a href="https://gov.near.org/t/storage-staking-price/399" target="_blank" rel="noopener noreferrer">Storage staking price</a> <a href="#user-content-fnref-1" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-2">
<p><a href="https://github.com/near/nearcore/pull/3881" target="_blank" rel="noopener noreferrer">Giảm chi phí lưu trữ 10x</a> <a href="#user-content-fnref-2" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/near/docs/edit/master/website/../docs/1.concepts/storage/storage-staking.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Sửa trang này</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Cập nhật lần cuối<!-- --> vào <b><time datetime="2024-01-11T18:09:55.000Z">11 thg 1, 2024</time></b> bởi <b>Github Actions</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Trang tài liệu"><a class="pagination-nav__link pagination-nav__link--prev" href="/vi/concepts/storage/data-storage"><div class="pagination-nav__sublabel">Trước</div><div class="pagination-nav__label">Storage trên NEAR</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/vi/concepts/storage/storage-solutions"><div class="pagination-nav__sublabel">Kế tiếp</div><div class="pagination-nav__label">Các giải pháp thay thế</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-does-nears-design-align-incentives" class="table-of-contents__link toc-highlight">How does NEAR&#39;s design align incentives?</a></li><li><a href="#when-do-tokens-get-staked" class="table-of-contents__link toc-highlight">When do tokens get staked?</a></li><li><a href="#the-million-cheap-data-additions-attack" class="table-of-contents__link toc-highlight">The &quot;million cheap data additions&quot; attack</a></li><li><a href="#btw-you-can-remove-data-to-unstake-some-tokens" class="table-of-contents__link toc-highlight">btw, you can remove data to unstake some tokens</a></li><li><a href="#how-much-does-it-cost" class="table-of-contents__link toc-highlight">How much does it cost?</a></li><li><a href="#example-cost-breakdown" class="table-of-contents__link toc-highlight">Example cost breakdown</a></li><li><a href="#calculate-costs-for-your-own-contract" class="table-of-contents__link toc-highlight">Calculate costs for your own contract</a></li><li><a href="#other-ways-to-keep-costs-down" class="table-of-contents__link toc-highlight">Other ways to keep costs down</a><ul><li><a href="#use-a-binary-serialization-format-rather-than-json" class="table-of-contents__link toc-highlight">Use a binary serialization format, rather than JSON</a></li><li><a href="#store-data-off-chain" class="table-of-contents__link toc-highlight">Store data off-chain</a></li></ul></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#footnotes" class="table-of-contents__link toc-highlight">Footnotes</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div><div class="container relative text-white pb-40 md:pb-100 pt-100"><div class="row"><div class="col md:w-1/4"><ul class="list-reset text-24 font-black text-yellow mt-50"><li><a href="https://mynearwallet.com/" class="hover:text-white">Wallet</a></li><li><a href="https://nearblocks.io/" class="hover:text-white">Explorer</a></li><li><a href="https://github.com/near-examples/" class="hover:text-white">Examples</a></li><li><a href="https://wiki.near.org/" class="hover:text-white">Wiki</a></li></ul></div><div class="col md:w-3/4 mt-50 md:mt-0" style="z-index:1"><ul class="list-reset flex flex-wrap -mx-20"><li class="mx-20"><a href="https://gov.near.org" class="block hover:text-discourse" target="_blank" id="discourse-1"><span class="icon icon-36"><svg enable-background="new 0 0 34 35" viewBox="0 0 34 35" xmlns="http://www.w3.org/2000/svg"><path d="m0 25.1c0-2.6 0-5.2 0-7.8 0-4.7 1.8-8.8 5.2-12.1 2.6-2.5 5.8-4 9.4-4.5 6.9-1.1 13.7 2.3 17.2 8.4 1.6 3 2.4 6.2 2.2 9.5-.4 4.6-2.3 8.5-5.7 11.6-2.5 2.2-5.4 3.6-8.6 4.1-.6.1-1.3.2-2 .2-5.7 0-11.4 0-17.1 0-.4 0-.5-.1-.5-.5-.1-3-.1-6-.1-8.9zm16.9-17.3c-.6 0-1.2.1-1.8.2-6.2 1.3-9.6 8.1-6.7 13.7.1.3.1.5.1.7-.5 1.6-1 3.2-1.4 4.7-.1.1-.1.3-.1.4.1.1.3 0 .4-.1 1.7-.4 3.4-.9 5.1-1.3.3-.1.6-.1.9.1 1.6.7 3.4.9 5.1.6 5.2-.8 8.9-5.7 8.1-11-.8-4.5-4.8-8-9.7-8z"></path></svg></span><span class="screen-reader-text">Forum</span></a></li><li class="mx-20"><a href="https://twitter.com/nearprotocol" class="block hover:text-twitter" target="_blank"><span class="icon icon-36"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></span><span class="screen-reader-text">Twitter</span></a></li><li class="mx-20"><a href="https://github.com/near" class="block hover:text-github" target="_blank"><span class="icon icon-36"><svg height="36" viewBox="0 0 36 36" width="36" xmlns="http://www.w3.org/2000/svg"><path d="m17.9991429 0c-9.93942861 0-17.9991429 8.058-17.9991429 18.0008571 0 7.9517143 5.15742857 14.6982858 12.3102857 17.0794286.9.1645714 1.2291429-.3908571 1.2291429-.8682857 0-.4268571-.0162857-1.5591429-.0248572-3.0608571-5.0065714 1.0868571-6.06342854-2.4137143-6.06342854-2.4137143-.81857143-2.0785715-1.99885715-2.6322857-1.99885715-2.6322857-1.63371428-1.1177143.12428572-1.0937143.12428572-1.0937143 1.806.1268571 2.75742857 1.8548571 2.75742857 1.8548571 1.60542857 2.7505714 4.2128571 1.956 5.238 1.4948572.1628571-1.1631429.6282857-1.956 1.1425714-2.406-3.9968571-.4542858-8.1985714-1.9988572-8.1985714-8.8962858 0-1.9654285.70114286-3.5717142 1.85228571-4.83-.18514285-.456-.80314285-2.28514281.17657143-4.76399996 0 0 1.51114286-.48342857 4.94999996 1.84542857 1.4357143-.39942857 2.9751429-.59914285 4.506-.606 1.5282858.00685715 3.0685715.20657143 4.5068572.606 3.4362857-2.32885714 4.944-1.84542857 4.944-1.84542857.9831428 2.47885715.3651428 4.30799996.1791428 4.76399996 1.1545715 1.2582858 1.8505715 2.8645715 1.8505715 4.83 0 6.9154286-4.2085715 8.436-8.2182857 8.8825715.6462857.5554285 1.2214285 1.6534285 1.2214285 3.3325714 0 2.4068571-.0214285 4.3482857-.0214285 4.938 0 .4817143.324 1.0414286 1.2377142.8657143 7.146-2.3845714 12.2991429-9.1277143 12.2991429-17.0768572 0-9.9428571-8.0597143-18.0008571-18.0008571-18.0008571"></path></svg></span><span class="screen-reader-text">GitHub</span></a></li><li class="mx-20"><a href="http://near.chat" class="block hover:text-discord" target="_blank"><span class="icon icon-36"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M297.216 243.2c0 15.616-11.52 28.416-26.112 28.416-14.336 0-26.112-12.8-26.112-28.416s11.52-28.416 26.112-28.416c14.592 0 26.112 12.8 26.112 28.416zm-119.552-28.416c-14.592 0-26.112 12.8-26.112 28.416s11.776 28.416 26.112 28.416c14.592 0 26.112-12.8 26.112-28.416.256-15.616-11.52-28.416-26.112-28.416zM448 52.736V512c-64.494-56.994-43.868-38.128-118.784-107.776l13.568 47.36H52.48C23.552 451.584 0 428.032 0 398.848V52.736C0 23.552 23.552 0 52.48 0h343.04C424.448 0 448 23.552 448 52.736zm-72.96 242.688c0-82.432-36.864-149.248-36.864-149.248-36.864-27.648-71.936-26.88-71.936-26.88l-3.584 4.096c43.52 13.312 63.744 32.512 63.744 32.512-60.811-33.329-132.244-33.335-191.232-7.424-9.472 4.352-15.104 7.424-15.104 7.424s21.248-20.224 67.328-33.536l-2.56-3.072s-35.072-.768-71.936 26.88c0 0-36.864 66.816-36.864 149.248 0 0 21.504 37.12 78.08 38.912 0 0 9.472-11.52 17.152-21.248-32.512-9.728-44.8-30.208-44.8-30.208 3.766 2.636 9.976 6.053 10.496 6.4 43.21 24.198 104.588 32.126 159.744 8.96 8.96-3.328 18.944-8.192 29.44-15.104 0 0-12.8 20.992-46.336 30.464 7.68 9.728 16.896 20.736 16.896 20.736 56.576-1.792 78.336-38.912 78.336-38.912z"></path></svg></span><span class="screen-reader-text">Discord</span></a></li><li class="mx-20"><a href="https://t.me/cryptonear" class="block hover:text-telegram" target="_blank"><span class="icon icon-36"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"></path></svg></span><span class="screen-reader-text">Telegram</span></a></li><li class="mx-20"><a href="https://www.youtube.com/channel/UCuKdIYVN8iE3fv8alyk1aMw" class="block hover:text-youtube" target="_blank"><span class="icon icon-36"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></span><span class="screen-reader-text">YouTube</span></a></li></ul><div class="row"><div class="col sm:w-1/3 mt-50"><h2 class="text-24 font-black text-blue-light">Resources</h2><ul id="menu-developers-1" class="footer-menu list-reset mt-5 text-16 md:text-18"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2045"><a href="https://near.org/devhub.near/widget/app">Contributor Program</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2945"><a target="_blank" rel="noopener noreferrer" href="https://near.org/nearhorizon.near/widget/Index">Startup Accelerator</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-6804"><a href="https://gov.near.org/">Forum</a></li></ul></div><div class="col sm:w-1/3 mt-50"><h2 class="text-24 font-black text-blue-light">About</h2><ul id="menu-about-1" class="footer-menu list-reset mt-5 text-16 md:text-18"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-441"><a href="https://near.org/about/">About Us</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-124"><a href="https://careers.near.org/jobs/">Careers</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3267"><a href="https://near.org/privacy/">Privacy Policy</a></li></ul></div></div></div></div><p class="text-14 mt-50 md:mt-100">Copyright ©<!-- -->2024<!-- --> <a href="https://near.org" class="hover:text-yellow">NEAR Protocol</a><span class="mx-10">|</span>All rights reserved<span class="mx-10">|</span><a href="mailto:hello@near.org" class="hover:text-yellow">hello@near.org</a><span class="mx-10">|</span><a href="https://near.org/privacy/" class="hover:text-yellow">Privacy Policy</a><span class="mx-10">|</span>Some icons created by <a href="https://www.flaticon.com/free-icons/coin" title="coin icons">Good Ware, Flaticon, and Freepick</a></p></div></div></footer></div>
</body>
</html>